<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PLC HMI Interface</title>
  <link rel="stylesheet" href="plc-details-css.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

</head>
<body>
    <div class="container">
        <!-- HMI Control Buttons Section -->
        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-gamepad section-icon"></i>
                HMI Control Buttons
            </h2>
            <div class="table-responsive" style="margin-bottom: 20px;">
                <table style="width: 100%">
                    <tbody>
                        <tr>
                            <td style="width: 25%">Clear Forcing</td>
                            <td style="width: 10%">
                                <span id="clear-forcing-status" style="color: #4caf50; font-weight: bold;">OFF</span>
                            </td>
                            <td style="width: 10%">
                                <button id="clear-forcing-btn" 
                                        class="btn btn-sm modify-btn">
                                    Clear Forcing
                                </button>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">Fault Reset</td>
                            <td style="width: 10%">
                                <span id="fault-reset-status" style="color: #4caf50; font-weight: bold;">OFF</span>
                            </td>
                            <td style="width: 10%">
                                <button id="fault-reset-btn" 
                                        class="btn btn-sm modify-btn">
                                    Fault Reset
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Analogue I/O Section -->
        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-chart-line section-icon"></i>
                Analogue I/O
            </h2>
            <div class="table-responsive">
                <table style="width: 100%">
                    <tbody>
                        <!-- AI0/1 Scaled Row -->
                        <tr>
                            <td style="width: 25%">AI0 Scaled</td>
                            <td style="width: 10%">
                                <span id="ai0-scaled-value" style="color: #4caf50; font-weight: bold; font-size: 1.1em">0.00 V</span>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">AI1 Scaled</td>
                            <td style="width: 10%">
                                <span id="ai1-scaled-value" style="color: #4caf50; font-weight: bold; font-size: 1.1em">0.00 V</span>
                            </td>
                            <td style="width: 10%"></td>
                        </tr>
                        <!-- AI0/1 Offset Row -->
                        <tr>
                            <td style="width: 25%">AI0 Offset</td>
                            <td style="width: 10%"><span id="ai0-offset-value">0.00</span></td>
                            <td style="width: 10%">
                                <button class="btn btn-sm modify-btn" 
                                        onclick="modifyValue('offset', 0)"
                                        style="background-color: #007bff; color: white; opacity: 0.7;">
                                    Modify
                                </button>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">AI1 Offset</td>
                            <td style="width: 10%"><span id="ai1-offset-value">0.00</span></td>
                            <td style="width: 10%">
                                <button class="btn btn-sm modify-btn" 
                                        onclick="modifyValue('offset', 1)"
                                        style="background-color: #007bff; color: white; opacity: 0.7;">
                                    Modify
                                </button>
                            </td>
                        </tr>
                        <!-- AI0/1 Scalar Row -->
                        <tr>
                            <td style="width: 25%">AI0 Scalar</td>
                            <td style="width: 10%"><span id="ai0-scalar-value">0.00</span></td>
                            <td style="width: 10%">
                                <button class="btn btn-sm modify-btn" 
                                        onclick="modifyValue('scalar', 0)"
                                        style="background-color: #007bff; color: white; opacity: 0.7;">
                                    Modify
                                </button>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">AI1 Scalar</td>
                            <td style="width: 10%"><span id="ai1-scalar-value">0.00</span></td>
                            <td style="width: 10%">
                                <button class="btn btn-sm modify-btn" 
                                        onclick="modifyValue('scalar', 1)"
                                        style="background-color: #007bff; color: white; opacity: 0.7;">
                                    Modify
                                </button>
                            </td>
                        </tr>
                        <!-- AI0/1 Raw Row -->
                        <tr>
                            <td style="width: 25%">AI0 Raw</td>
                            <td style="width: 10%"><span id="ai0-raw-value">0</span></td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">AI1 Raw</td>
                            <td style="width: 10%"><span id="ai1-raw-value">0</span></td>
                            <td style="width: 10%"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Digital I/O Section -->
        <div class="section">
            <h2 class="section-title">
                <i class="fas fa-microchip section-icon"></i>
                Digital I/O
            </h2>
            <div class="table-responsive">
                <table style="width: 100%">
                    <tbody>
                        <!-- Bank A -->
                        <tr>
                            <td style="width: 25%">DI A0</td>
                            <td style="width: 10%"><span id="di-a0-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 0, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 0, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A0</td>
                            <td style="width: 10%"><span id="do-a0-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 0, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 0, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A1</td>
                            <td style="width: 10%"><span id="di-a1-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 1, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 1, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A1</td>
                            <td style="width: 10%"><span id="do-a1-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 1, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 1, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A2</td>
                            <td style="width: 10%"><span id="di-a2-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 2, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 2, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A2</td>
                            <td style="width: 10%"><span id="do-a2-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 2, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 2, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A3</td>
                            <td style="width: 10%"><span id="di-a3-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 3, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 3, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A3</td>
                            <td style="width: 10%"><span id="do-a3-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 3, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 3, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A4</td>
                            <td style="width: 10%"><span id="di-a4-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 4, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 4, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A4</td>
                            <td style="width: 10%"><span id="do-a4-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 4, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 4, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A5</td>
                            <td style="width: 10%"><span id="di-a5-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 5, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 5, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A5</td>
                            <td style="width: 10%"><span id="do-a5-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 5, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 5, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A6</td>
                            <td style="width: 10%"><span id="di-a6-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 6, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 6, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A6</td>
                            <td style="width: 10%"><span id="do-a6-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 6, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 6, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI A7</td>
                            <td style="width: 10%"><span id="di-a7-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'a', 7, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'a', 7, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO A7</td>
                            <td style="width: 10%"><span id="do-a7-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'a', 7, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'a', 7, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <!-- Bank B -->
                        <tr>
                            <td style="width: 25%">DI B0</td>
                            <td style="width: 10%"><span id="di-b0-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 0, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 0, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO B0</td>
                            <td style="width: 10%"><span id="do-b0-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'b', 0, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'b', 0, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI B1</td>
                            <td style="width: 10%"><span id="di-b1-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 1, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 1, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%">DO B1</td>
                            <td style="width: 10%"><span id="do-b1-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('output', 'b', 1, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('output', 'b', 1, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI B2</td>
                            <td style="width: 10%"><span id="di-b2-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 2, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 2, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI B3</td>
                            <td style="width: 10%"><span id="di-b3-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 3, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 3, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI B4</td>
                            <td style="width: 10%"><span id="di-b4-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 4, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 4, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                        </tr>
                        <tr>
                            <td style="width: 25%">DI B5</td>
                            <td style="width: 10%"><span id="di-b5-status" style="color: #f44336; font-weight: bold;">OFF</span></td>
                            <td style="width: 10%">
                                <div style="display: flex; gap: 5px; justify-content: center;">
                                    <button class="btn btn-sm force-btn-on" 
                                            onclick="toggleForce('input', 'b', 5, true)"
                                            style="background-color: #dc3545; color: white; opacity: 0.7;">
                                        Force On
                                    </button>
                                    <button class="btn btn-sm force-btn-off" 
                                            onclick="toggleForce('input', 'b', 5, false)"
                                            style="background-color: #9a0c1c; color: white; opacity: 0.7;">
                                        Force Off
                                    </button>
                                </div>
                            </td>
                            <td style="width: 10%"></td>
                            <td style="width: 25%"></td>
                            <td style="width: 10%"></td>
                            <td style="width: 10%"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Add this at the bottom of the container -->
        <div class="navigation-footer">
            <button onclick="window.location.href='index.html'" class="btn back-button">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </button>
        </div>
    </div>

    <!-- First jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Then the notification banner plugin -->
    <script>
    (function($) {
        $.fn.notificationBanner = function(options) {
            var settings = $.extend({
                text: "",
                position: "top",
                background: "#000000",
                height: "auto",
                padding: "10px",
                width: "100%",
                style: {}
            }, options);

            return this.each(function() {
                $(this).css({
                    'position': 'fixed',
                    'z-index': '9999',
                    'left': '0',
                    'right': '0',
                    [settings.position]: '0',
                    'background-color': settings.background,
                    'height': settings.height,
                    'padding': settings.padding,
                    'width': settings.width
                }).css(settings.style).html(settings.text);
            });
        };
    })(jQuery);
    </script>

    <!-- Then the forcing banner code -->
    <script>
    const ForcingBanner = {
        init: function() {
            // Create the banner div if it doesn't exist
            if (!$('#forcing-banner').length) {
                $('body').prepend('<div id="forcing-banner"></div>');
            }

            // Initialize the notification banner (hidden by default)
            $("#forcing-banner").notificationBanner({
                text: "⚠️ FORCING ACTIVE - Some I/O points are currently being forced",
                position: "top",
                background: "#dc3545",
                height: "30px",
                padding: "15px",
                width: "100%",
                style: {
                    color: "white",
                    fontSize: "16px",
                    fontWeight: "bold",
                    textAlign: "center",
                    display: "none"
                }
            });
        },

        update: function(data) {
            // Check the Stats.ForcingActive bit
            if (data && data.stats && data.stats.forcingActive) {
                $("#forcing-banner").slideDown();
            } else {
                $("#forcing-banner").slideUp();
            }
        }
    };
    </script>

    <!-- Then your existing scripts -->
    <script>
    $(document).ready(function() {
        ForcingBanner.init();
        function formatBoolValue(value) {
            return value ? 'ON' : 'OFF';
        }

        function updateStatusColor(element, value) {
            element.style.color = value ? '#4caf50' : '#f44336';
        }

        // Add the toggleForce function
        window.toggleForce = function(type, bank, channel, state) {
            // Send command to PLC with pulse pattern
            window.electron.sendToMain('force-digital', {
                type: type,
                bank: bank,
                channel: channel,
                forcedStatus: state,
                forcedState: true
            });

            setTimeout(() => {
                window.electron.sendToMain('force-digital', {
                    type: type,
                    bank: bank,
                    channel: channel,
                    forcedStatus: state,
                    forcedState: false
                });
            }, 500);
        };

        // Update the receiveData handler
        window.electron.receiveData((data) => {
            try {
                //console.log('Received PLC data:', data);
                
                if (data && data.db1) {
                    ForcingBanner.update(data.db1);
                    plcData = data.db1; // Store the data globally
                    updatePLCTags(data.db1);
                }

                if (data && data.faults) {
                    handleFaultBanner(data.faults);
                }
            } catch (error) {
                console.error('Error processing PLC data:', error);
                console.error('Data structure:', data);
            }
        });

        function updatePLCTags(data) {
            try {
                // Update Analogue Values
                if (data.analogue) {
                    if (data.analogue.ai0) {
                        document.getElementById('ai0-scaled-value').textContent = `${data.analogue.ai0.scaled.toFixed(2)} V`;
                        document.getElementById('ai0-offset-value').textContent = data.analogue.ai0.offset.toFixed(2);
                        document.getElementById('ai0-scalar-value').textContent = data.analogue.ai0.scalar.toFixed(2);
                        document.getElementById('ai0-raw-value').textContent = data.analogue.ai0.raw;
                    }
                    if (data.analogue.ai1) {
                        document.getElementById('ai1-scaled-value').textContent = `${data.analogue.ai1.scaled.toFixed(2)} V`;
                        document.getElementById('ai1-offset-value').textContent = data.analogue.ai1.offset.toFixed(2);
                        document.getElementById('ai1-scalar-value').textContent = data.analogue.ai1.scalar.toFixed(2);
                        document.getElementById('ai1-raw-value').textContent = data.analogue.ai1.raw;
                    }
                }

                // Update Digital Inputs Bank A
                if (data.inputs && data.inputs.a) {
                    for (let i = 0; i < 8; i++) {
                        const diElement = document.getElementById(`di-a${i}-status`);
                        if (diElement && data.inputs.a[i]) {
                            diElement.textContent = formatBoolValue(data.inputs.a[i].state);
                            updateStatusColor(diElement, data.inputs.a[i].state);
                        }
                    }
                }

                // Update Digital Outputs Bank A
                if (data.outputs && data.outputs.a) {
                    for (let i = 0; i < 8; i++) {
                        const doElement = document.getElementById(`do-a${i}-status`);
                        if (doElement && data.outputs.a[i]) {
                            doElement.textContent = formatBoolValue(data.outputs.a[i].state);
                            updateStatusColor(doElement, data.outputs.a[i].state);
                        }
                    }
                }

                // Update Digital Inputs Bank B
                if (data.inputs && data.inputs.b) {
                    for (let i = 0; i < 6; i++) {
                        const diElement = document.getElementById(`di-b${i}-status`);
                        if (diElement && data.inputs.b[i]) {
                            diElement.textContent = formatBoolValue(data.inputs.b[i].state);
                            updateStatusColor(diElement, data.inputs.b[i].state);
                        }
                    }
                }

                // Update Digital Outputs Bank B (only B0 and B1)
                if (data.outputs && data.outputs.b) {
                    for (let i = 0; i < 2; i++) {
                        const doElement = document.getElementById(`do-b${i}-status`);
                        if (doElement && data.outputs.b[i]) {
                            doElement.textContent = formatBoolValue(data.outputs.b[i].state);
                            updateStatusColor(doElement, data.outputs.b[i].state);
                        }
                    }
                }

                // Update HMI Button Status
                if (data.hmiButtons) {
                    const clearForcingStatus = document.getElementById('clear-forcing-status');
                    const faultResetStatus = document.getElementById('fault-reset-status');
                    
                    if (clearForcingStatus) {
                        clearForcingStatus.textContent = data.hmiButtons.clearForcing ? 'ON' : 'OFF';
                        clearForcingStatus.style.color = data.hmiButtons.clearForcing ? '#4caf50' : '#f44336';
                    }
                    
                    if (faultResetStatus) {
                        faultResetStatus.textContent = data.hmiButtons.faultReset ? 'ON' : 'OFF';
                        faultResetStatus.style.color = data.hmiButtons.faultReset ? '#4caf50' : '#f44336';
                    }
                }
            } catch (error) {
                console.error('Error in updatePLCTags:', error);
                console.error('Data structure:', data);
            }
        }

        // Add event listener for the test force button
        $(document).on('click', '.control-button', () => {
            window.electron.sendToMain('force-digital', {
                type: 'input',
                bank: 'a',
                channel: 0,
                forcedStatus: true,
                forcedState: true
            });

            setTimeout(() => {
                window.electron.sendToMain('force-digital', {
                    type: 'input',
                    bank: 'a',
                    channel: 0,
                    forcedStatus: true,
                    forcedState: false
                });
            }, 500);
        });

        window.modifyValue = function(type, channel) {
            if (!plcData) return;
            
            const currentValue = type === 'offset' 
                ? plcData.analogue[`ai${channel}`].offset 
                : plcData.analogue[`ai${channel}`].scalar;
            
            const newValue = prompt(`Enter new ${type} value for AI${channel}:`, currentValue);
            
            if (newValue !== null && !isNaN(newValue)) {
                window.electron.sendToMain('modify-analogue', {
                    channel: channel,
                    type: type,
                    value: parseFloat(newValue)
                });
            }
        };

        // Add event listeners for the special buttons
        $(document).on('click', '#clear-forcing-btn', () => {
            window.electron.clearForcing();
        });

        $(document).on('click', '#fault-reset-btn', () => {
            window.electron.faultReset();
        });


    });
    </script>

</body>
</html>
