<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BMDTX8B88C"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-BMDTX8B88C');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Proximity Switch System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">    <script src="worksheet-core.js"></script>
<script src="worksheet-tracking.js"></script>

  <style>
    /* Simple mobile layout for the simulation section */
    @media (max-width: 768px) {
      /* Stack the simulation container vertically */
      .simulation-section .simulation-container {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Make control panel full width */
      .simulation-section .control-panel {
        width: 100% !important;
        padding: 16px !important;
      }

      /* Make sensor visualization responsive */
      .simulation-section .sensor-visualization {
        min-width: 100% !important;
        height: 150px !important;
      }

      /* Make charts full width and adjust height */
      .simulation-section canvas {
        width: 100% !important;
        height: 200px !important;
      }

      /* Adjust slider for mobile */
      .simulation-section input[type="range"] {
        height: 12px !important;
      }

      /* Make buttons easier to tap */
      .simulation-section button {
        padding: 12px 20px !important;
        font-size: 14px !important;
        margin-bottom: 8px !important;
      }

      /* Make option labels full width for easy tapping */
      .simulation-section .multiple-choice-options .option-label {
        display: block;
      }

      /* Stack the sensor types grid on mobile */
      .simulation-section .explanation-card .card-content > div[style*="grid-template-columns"] {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Stack the fault detection grid on mobile */
      .simulation-section .explanation-card .card-content > div[style*="grid-template-columns: 1fr 1fr"] {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }
    }
  </style>

</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link active">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-8.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Worksheet</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Worksheet 9 - Proximity Switch System Maintenance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-10.html'">
            <span>Next Worksheet</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <div class="introduction-content-wrapper">
          <div class="introduction-text">
            <p>This worksheet covers maintenance procedures for proximity switch systems. Proximity switches are non-contact sensors that detect the presence of metallic objects and are critical for position sensing, object detection, and safety applications in industrial systems.</p>
          </div>
          <div class="introduction-image">
            <div class="system-diagram">
              <img src="assets/maintenance/proximity-switch.png" alt="Proximity Switch System Maintenance">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Over To You Section -->
    <div class="worksheet-section over-to-you-section">
      <h2 class="section-header"><i class="fas fa-hands-helping"></i> 2. Over To You</h2>
      <div class="worksheet-content">
        <p><strong>Examine the proximity switch system and understand non-contact detection principles:</strong></p>
        
        <div class="steps-container">
          <div class="step-card" data-step="1">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Locate Proximity Sensor</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Locate the proximity sensor on your training system. This sensor monitors whether the tank lid is properly in place to ensure safe operation.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="2">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Test Proximity Detection</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Disturb the proximity sensor by slightly lifting the tank, removing the lid slightly, or gently bending the metal bracket away from the sensor. Observe how this triggers a fault and shuts off the system.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="3">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Monitor Status on IO Screen</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Navigate to the IO screen and monitor the status of the proximity sensor. Disturb the sensor again and observe the status changing in real-time on the HMI.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

        <!-- So What Section -->
    <div class="worksheet-section so-what-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> 3. So What?</h2>
      <div class="so-what-content">
        
        <!-- Proximity Switch Overview Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-radar"></i>
            <h3>Proximity Switch System Overview</h3>
          </div>
          <div class="card-content">
            <p>Proximity switches improve automation and safety by detecting objects without physical contact, reducing wear and increasing durability.</p>
          </div>
        </div>

        <!-- Sensor Types Card -->
        <div class="explanation-card" style="background: #1a1a2f; border-left: 4px solid #2196F3;">
          <div class="card-header">
            <i class="fas fa-microchip"></i>
            <h3>Types of Proximity Sensors</h3>
          </div>
          <div class="card-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
              <div style="text-align: center; padding: 15px; background: #2a2a2a; border-radius: 8px;">
                <i class="fas fa-magnet" style="font-size: 24px; color: #4CAF50; margin-bottom: 10px;"></i>
                <h4 style="color: #4CAF50; margin: 10px 0;">Inductive</h4>
                <p style="color: #AAA; font-size: 14px; margin: 0;">Detects metal objects only</p>
              </div>
              <div style="text-align: center; padding: 15px; background: #2a2a2a; border-radius: 8px;">
                <i class="fas fa-bolt" style="font-size: 24px; color: #FF9800; margin-bottom: 10px;"></i>
                <h4 style="color: #FF9800; margin: 10px 0;">Capacitive</h4>
                <p style="color: #AAA; font-size: 14px; margin: 0;">Detects both metal and non-metal materials</p>
              </div>
              <div style="text-align: center; padding: 15px; background: #2a2a2a; border-radius: 8px;">
                <i class="fas fa-lightbulb" style="font-size: 24px; color: #9C27B0; margin-bottom: 10px;"></i>
                <h4 style="color: #9C27B0; margin: 10px 0;">Photoelectric</h4>
                <p style="color: #AAA; font-size: 14px; margin: 0;">Uses light to detect objects</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Safety Applications Card -->
        <div class="explanation-card" style="background: #1a2f1a; border-left: 4px solid #4CAF50;">
          <div class="card-header">
            <i class="fas fa-shield-alt"></i>
            <h3>Safety Applications</h3>
          </div>
          <div class="card-content">
            <ul style="margin: 0; padding-left: 20px; color: #FFFFFF;">
              <li>Confirms metal components (like tank lids) are in place</li>
              <li>Prevents system operation if required objects are missing</li>
              <li>Monitors guards and access points</li>
              <li>Ensures safe operating conditions</li>
            </ul>
          </div>
        </div>

        <!-- Fault Detection Card -->
        <div class="explanation-card" style="background: #2f1a1a; border-left: 4px solid #F44336;">
          <div class="card-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Fault Detection and Prevention</h3>
          </div>
          <div class="card-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
              <div>
                <h4 style="color: #FF9800; margin-bottom: 10px;"><i class="fas fa-tools"></i> Installation Issues</h4>
                <ul style="color: #AAA; font-size: 14px; margin: 0; padding-left: 20px;">
                  <li>Misalignment</li>
                  <li>Poor mounting</li>
                  <li>Wiring faults</li>
                </ul>
              </div>
              <div>
                <h4 style="color: #F44336; margin-bottom: 10px;"><i class="fas fa-cloud"></i> Environmental Factors</h4>
                <ul style="color: #AAA; font-size: 14px; margin: 0; padding-left: 20px;">
                  <li>Dust accumulation</li>
                  <li>Moisture exposure</li>
                  <li>Temperature extremes</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Maintenance Override Card -->
        <div class="explanation-card" style="background: #2f2f1a; border-left: 4px solid #FF9800;">
          <div class="card-header">
            <i class="fas fa-wrench"></i>
            <h3>Maintenance Override</h3>
          </div>
          <div class="card-content">
            <p style="color: #FFFFFF; margin: 0;">During maintenance, sensors can be overridden by presenting a different metal object to simulate detection, allowing safe testing and calibration.</p>
          </div>
        </div>

        <!-- Key Learning Points Card -->
        <div class="key-points-card">
          <div class="card-header">
            <i class="fas fa-lightbulb"></i>
            <h3>Key Learning Points</h3>
          </div>
          <div class="key-points-grid">
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-hand-paper"></i>
              </div>
              <div class="key-point-content">
                <strong>Proximity switches detect objects without contact, reducing wear and increasing system reliability.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-microchip"></i>
              </div>
              <div class="key-point-content">
                <strong>Inductive sensors detect metal, capacitive sensors detect various materials, and photoelectric sensors use light.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="key-point-content">
                <strong>A sensor may prevent system operation if it fails to detect a required object, such as a metal lid.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="key-point-content">
                <strong>False signals can result from misalignment, poor mounting, wiring faults, or environmental interference.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-tools"></i>
              </div>
              <div class="key-point-content">
                <strong>Sensors are sometimes overridden during maintenance using metal objects to simulate detection.</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What is the main function of a proximity switch in an automated system?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-1" value="A" class="option-radio">
              <span class="option-text">A) To provide power to equipment</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="B" class="option-radio">
              <span class="option-text">B) To measure the temperature of objects</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="C" class="option-radio">
              <span class="option-text">C) To control the speed of motors</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="D" class="option-radio">
              <span class="option-text">D) Detects objects without contact</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) To detect the presence of an object without physical contact, helping with automation, positioning, and safety.
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: What type of object does an inductive proximity sensor detect?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-2" value="A" class="option-radio">
              <span class="option-text">A) Detects metal objects only</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="B" class="option-radio">
              <span class="option-text">B) It detects all types of objects</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="C" class="option-radio">
              <span class="option-text">C) It detects only plastic objects</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="D" class="option-radio">
              <span class="option-text">D) It detects only wooden objects</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> B) It detects metal objects only.
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: Why is the proximity sensor used to detect the tank lid in this system?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-3" value="A" class="option-radio">
              <span class="option-text">A) Ensures tank lid is in place</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="B" class="option-radio">
              <span class="option-text">B) To measure the temperature of the lid</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="C" class="option-radio">
              <span class="option-text">C) To control the lid's position</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="D" class="option-radio">
              <span class="option-text">D) To provide power to the lid</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> C) To ensure the tank lid is in place before the system runs, preventing water from being pumped without the lid.
          </div>
        </div>
        
        <div class="question-item" data-question="4">
          <h4>Question 4: What are three types of proximity sensors and what do they detect?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-4" value="A" class="option-radio">
              <span class="option-text">A) Magnetic, electrical, and mechanical</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="B" class="option-radio">
              <span class="option-text">B) Inductive, capacitive, photoelectric</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="C" class="option-radio">
              <span class="option-text">C) Optical, thermal, and acoustic</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="D" class="option-radio">
              <span class="option-text">D) Digital, analog, and hybrid</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(4)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> D) Inductive (metal), capacitive (metal and non-metal), and photoelectric (uses light to detect objects).
          </div>
        </div>
        
        <div class="question-item" data-question="5">
          <h4>Question 5: What common issues can cause a proximity sensor to give false readings?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-5" value="A" class="option-radio">
              <span class="option-text">A) High temperature, low pressure, or electrical noise</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="B" class="option-radio">
              <span class="option-text">B) Misalignment, mounting, wiring, dust, moisture</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="C" class="option-radio">
              <span class="option-text">C) Fast movement, slow movement, or no movement</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="D" class="option-radio">
              <span class="option-text">D) High voltage, low voltage, or no voltage</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(5)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Misalignment, poor mounting, wiring faults, dust, or moisture.
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> 3. Interactive Proximity Switch System Maintenance</h2>
      
      <!-- Introduction -->
      <div class="simulation-intro" style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px;">
        <h3 style="color: #2196F3; margin-top: 0;"><i class="fas fa-info-circle"></i> Understanding Proximity Sensors</h3>
        <p style="color: #aaa; margin: 10px 0;">This simulation demonstrates how an inductive proximity sensor works in an industrial setting. Follow the steps below to learn about sensor operation, detection ranges, and proper positioning.</p>
      </div>

             <!-- Main Simulation Area -->
       <div class="simulation-container" style="display: grid; grid-template-columns: 300px 1fr; gap: 20px; margin: 20px 0; overflow: hidden;">
        <!-- Control Panel -->
        <div class="control-panel" style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333;">
          <h4 style="color: #2196F3; margin-top: 0;">Sensor Controls</h4>
          
          <!-- Target Position Control -->
          <div style="margin: 20px 0;">
            <label style="color: #aaa; display: block; margin-bottom: 10px;">Target Distance (mm)</label>
            <input type="range" id="target-distance" min="0" max="100" value="20" step="1" 
                   style="width: 100%; background: #2196F3; height: 10px; border-radius: 5px; -webkit-appearance: none;">
            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
              <span style="color: #666;">0mm</span>
              <span id="distance-value" style="color: #2196F3;">20mm</span>
              <span style="color: #666;">100mm</span>
            </div>
          </div>

          <!-- Status Display -->
          <div class="sensor-status" style="margin-top: 20px; padding: 15px; background: #1a1a1a; border-radius: 5px;">
            <p style="margin: 0; color: #aaa;">Sensor Status: <span id="sensor-state" style="color: #FF5722;">Not Detecting</span></p>
            <p style="margin: 10px 0; color: #aaa;">Detection Range: <span style="color: #4CAF50;">0-40mm</span></p>
            <p style="margin: 10px 0; color: #aaa;">Current Distance: <span id="current-distance" style="color: #2196F3;">20mm</span></p>
          </div>

                     <!-- Step Progress -->
           <div class="step-progress" style="margin-top: 20px;">
             <h5 style="color: #aaa; margin: 0 0 10px 0;">Learning Progress:</h5>
             <div class="progress-steps">
               <div class="step" style="padding: 10px; background: #1a1a1a; border-radius: 5px; margin-bottom: 10px;">
                 <span style="color: #aaa;">1. Basic Detection</span>
                 <span id="step1-complete" style="float: right; color: #FF5722;">❌</span>
               </div>
               <div class="step" style="padding: 10px; background: #1a1a1a; border-radius: 5px; margin-bottom: 10px;">
                 <span style="color: #aaa;">2. Range Testing</span>
                 <span id="step2-complete" style="float: right; color: #FF5722;">❌</span>
               </div>
               <div class="step" style="padding: 10px; background: #1a1a1a; border-radius: 5px;">
                 <span style="color: #aaa;">3. Hysteresis Check</span>
                 <span id="step3-complete" style="float: right; color: #FF5722;">❌</span>
               </div>
             </div>
             <button id="reset-progress-btn" onclick="resetProgress()" style="margin-top: 15px; padding: 8px 16px; background: #666; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
               Reset Progress
             </button>
           </div>
        </div>

        <!-- Visualization Area -->
        <div style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333;">
          <div style="margin-bottom: 20px;">
            <h4 style="color: #2196F3; margin-top: 0;">Current Task</h4>
            <div id="task-description" style="color: #aaa; padding: 15px; background: #1a1a1a; border-radius: 5px;">
              Move the target into the detection range (0-40mm) to see how the sensor responds.
            </div>
          </div>
          
                     <!-- Sensor Visualization -->
           <div class="sensor-visualization" style="position: relative; height: 200px; background: #1a1a1a; border-radius: 8px; overflow: hidden; margin-bottom: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.2); width: 100%; min-width: 400px;">
            <!-- Sensor body with detection face -->
            <div id="sensor-body" style="position: absolute; left: 40px; top: 50%; transform: translateY(-50%); width: 30px; height: 80px; background: #666; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
              <div id="sensor-face" style="width: 20px; height: 20px; background: #2196F3; border-radius: 50%; position: absolute; right: -10px; top: 50%; transform: translateY(-50%); box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);"></div>
            </div>
            <!-- Detection zone (0-40mm range) -->
            <div id="detection-zone" style="position: absolute; left: 70px; top: 50%; transform: translateY(-50%); height: 100px; border: 2px dashed #2196F3; border-radius: 5px; opacity: 0.1;"></div>
            <!-- Full range background (0-100mm) -->
            <div id="full-range-zone" style="position: absolute; left: 70px; top: 50%; transform: translateY(-50%); height: 100px; width: 300px; background: rgba(255, 255, 255, 0.02); border-radius: 5px; border: 1px solid rgba(255, 255, 255, 0.05);"></div>
            <!-- Target object -->
            <div id="target-object" style="position: absolute; left: 150px; top: 50%; transform: translateY(-50%); width: 30px; height: 30px; background: #FF5722; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);"></div>
            
          </div>

          <!-- Detection Graph -->
          <div style="margin-top: 20px; background: #1a1a1a; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
            <canvas id="detection-chart" height="200"></canvas>
          </div>
        </div>
      </div>

      <!-- Learning Steps -->
      <div class="learning-steps" style="margin-top: 40px;">
        <h3 style="color: #4CAF50; margin-top: 0;"><i class="fas fa-graduation-cap"></i> Learning Steps</h3>
        
        <!-- Step 1 -->
        <div class="learning-step" style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px;">
          <h4 style="color: #2196F3; margin-top: 0;">Step 1: Basic Detection</h4>
          <p style="color: #aaa;">Move the target in and out of the detection zone to understand how the sensor responds. The sensor will activate when a metal target enters its detection range.</p>
          <ul style="color: #aaa; margin: 10px 0;">
            <li>Detection Range: 0-40mm</li>
            <li>Sensor Type: Inductive (detects metal objects)</li>
            <li>Output: Digital (ON/OFF)</li>
          </ul>
        </div>

        <!-- Step 2 -->
        <div class="learning-step" style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px;">
          <h4 style="color: #2196F3; margin-top: 0;">Step 2: Range Testing</h4>
          <p style="color: #aaa;">Test the sensor at different distances to understand its reliable detection range. Note that the signal strength decreases with distance.</p>
          <ul style="color: #aaa; margin: 10px 0;">
            <li>Optimal Range: 0-32mm (80% of rated)</li>
            <li>Maximum Range: 40mm</li>
            <li>Best Practice: Mount at 50-75% of rated range</li>
          </ul>
        </div>

        <!-- Step 3 -->
        <div class="learning-step" style="background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #333;">
          <h4 style="color: #2196F3; margin-top: 0;">Step 3: Understanding Hysteresis</h4>
          <p style="color: #aaa;">Observe how the sensor has slightly different ON and OFF points. This hysteresis prevents chattering when the target is near the threshold.</p>
          <ul style="color: #aaa; margin: 10px 0;">
            <li>ON Point: 40mm (moving in)</li>
            <li>OFF Point: 42mm (moving out)</li>
            <li>Hysteresis: 2mm difference</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Add Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="proximity-switch-simulation.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const initFunc = 'initializeProximitySwitchSimulation';
      setTimeout(() => {
        if (typeof window[initFunc] === 'function') {
          console.log('Initializing', initFunc);
          window[initFunc]();
        } else {
          const loadingElement = document.querySelector('.simulation-loading');
          if (loadingElement) {
            loadingElement.innerHTML = '<p>Simulation ready - Proximity Switch System Maintenance</p>';
          }
        }
      }, 1000);
      loadSavedAnswers();
    });
    
        function submitAnswer(questionNumber) {
          const answerInput = document.querySelector(`[data-question="${questionNumber}"]`);
          if (!answerInput) return;
          
          const selectedOption = document.querySelector(`input[name="question-${questionNumber}"]:checked`);
          if (!selectedOption) {
            alert('Please select an answer before submitting.');
            return;
          }
          
          const answer = selectedOption.value;
          
          // Save with enhanced tracking
          worksheetTracker.saveAnswer(9, questionNumber, answer, 'maintenance');
          
          // Define correct answers for worksheet 9 (reshuffled to DAABB)
          const correctAnswers = {
                "1": "D",
                "2": "A",
                "3": "A",
                "4": "B",
                "5": "B"
          };
          
          // Apply visual feedback
          const allOptions = answerInput.querySelectorAll('.option-label');
          const correctAnswer = correctAnswers[questionNumber];
          
          allOptions.forEach(option => {
            const radio = option.querySelector('.option-radio');
            const optionValue = radio.value;
            
            if (optionValue === correctAnswer) {
              option.classList.add('correct');
            } else if (optionValue === answer && answer !== correctAnswer) {
              option.classList.add('incorrect');
            }
          });
          
          // Mark question as submitted to disable further interaction
          answerInput.classList.add('submitted');
          
          // Show feedback on button
          const submitBtn = answerInput.querySelector('.submit-question-btn');
          if (submitBtn) {
            const originalText = submitBtn.textContent;
            submitBtn.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
            submitBtn.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
            
            // Add incorrect class for enhanced styling
            if (answer !== correctAnswer) {
              submitBtn.classList.add('incorrect');
            }
            
            setTimeout(() => {
              submitBtn.textContent = originalText;
              submitBtn.style.background = '#4CAF50';
              submitBtn.classList.remove('incorrect');
            }, 2000);
          }
          
          // Show correct answer if available (dynamically from option text)
          const correctAnswerDiv = answerInput.querySelector('.correct-answer');
          if (correctAnswerDiv) {
            const correctOptionRadio = answerInput.querySelector(`.option-radio[value="${correctAnswer}"]`);
            if (correctOptionRadio) {
              const correctLabel = correctOptionRadio.closest('.option-label');
              if (correctLabel) {
                const correctTextSpan = correctLabel.querySelector('.option-text');
                const correctText = correctTextSpan ? correctTextSpan.textContent : `${correctAnswer}`;
                correctAnswerDiv.innerHTML = `<strong style="color: #4CAF50;">Correct Answer:</strong> ${correctText}.`;
              }
            }
            correctAnswerDiv.style.display = 'block';
          }

          // Apply visual completion feedback
          if (typeof markQuestionAsCompleted === 'function') {
            markQuestionAsCompleted(answerInput, questionNumber, answer);
          }
        }
    
    // Step card click functionality
    function initializeStepCardClicks() {
      const stepCards = document.querySelectorAll('.step-card');
      
      stepCards.forEach(card => {
        card.addEventListener('click', function(e) {
          // Don't trigger if clicking on the checkbox itself
          if (e.target.closest('.step-checkbox')) {
            return;
          }
          
          const checkbox = this.querySelector('.step-complete-checkbox');
          if (checkbox) {
            // Toggle the checkbox
            checkbox.checked = !checkbox.checked;
            
            // Update the card's completed state using the existing class name
            if (checkbox.checked) {
              this.classList.add('step-completed');
            } else {
              this.classList.remove('step-completed');
            }
            
            // Trigger change event on checkbox for any existing listeners
            const event = new Event('change', { bubbles: true });
            checkbox.dispatchEvent(event);
          }
        });
      });
    }
    
    // Initialize step card functionality when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeStepCardClicks();
      
      // Use the existing step tracking system
      if (typeof initializeStepTracking === 'function') {
        initializeStepTracking();
      }
    });
  </script>
  
  <!-- Bottom Navigation -->
  <div class="worksheet-bottom-nav">
    <div class="worksheet-header-content">
      <div class="worksheet-header-left">
        <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-8.html'">
          <i class="fas fa-arrow-left"></i>
          <span>Previous Worksheet</span>
        </button>
      </div>
      <div class="worksheet-header-center">
        <h1 class="worksheet-title">Worksheet 9 - Proximity Switch System Maintenance</h1>
      </div>
      <div class="worksheet-header-right">
        <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-10.html'">
          <span>Next Worksheet</span>
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
  
</body>
</html> 