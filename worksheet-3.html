<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Status LED System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
        <h1>Inspiring the Next Generation of Engineers</h1>
      </div>
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='settings.html'" class="nav-link">
            <i class="fas fa-gear"></i> SETTINGS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-2.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Worksheet</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Worksheet 3 - Status LED System Maintenance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-4.html'">
            <span>Next Worksheet</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <p>Status LEDs provide instant visual feedback about system conditions and are essential for quick diagnosis. These simple but critical indicators help operators understand system status at a glance.</p>
        
        <div class="system-diagram">
          <img src="assets/maintenance/status-led.png" alt="Status LED System">
          <figcaption>Status LED System Components</figcaption>
        </div>
      </div>
    </div>



    <!-- Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What is the purpose of the Status LED in the system?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-1" value="A" class="option-radio">
              <span class="option-text">A) To indicate the system's condition and help quickly identify faults and safety issues for efficient maintenance</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="B" class="option-radio">
              <span class="option-text">B) To provide lighting for the work area</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="C" class="option-radio">
              <span class="option-text">C) To measure system temperature</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="D" class="option-radio">
              <span class="option-text">D) To control system power</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1, event)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) To indicate the system's condition and help quickly identify faults and safety issues for efficient maintenance.
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: What does a green Status LED indicate?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-2" value="A" class="option-radio">
              <span class="option-text">A) Green means the system is operating normally</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="B" class="option-radio">
              <span class="option-text">B) Green means there is a fault</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="C" class="option-radio">
              <span class="option-text">C) Green means the system is starting up</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="D" class="option-radio">
              <span class="option-text">D) Green means the system is shutting down</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2, event)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Green means the system is operating normally.
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: What colour does the LED turn when a fault is detected, but the system may still function?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-3" value="A" class="option-radio">
              <span class="option-text">A) Orange, it signals a fault that needs investigation</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="B" class="option-radio">
              <span class="option-text">B) Red, it signals a critical fault</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="C" class="option-radio">
              <span class="option-text">C) Blue, it signals normal operation</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="D" class="option-radio">
              <span class="option-text">D) Yellow, it signals the system is starting</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3, event)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Orange, it signals a fault that needs investigation.
          </div>
        </div>
        
        <div class="question-item" data-question="4">
          <h4>Question 4: How can you trigger a safety fault to observe the LED behaviour?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-4" value="A" class="option-radio">
              <span class="option-text">A) By pressing the Emergency Stop (E-Stop) to put the system into a safety error mode</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="B" class="option-radio">
              <span class="option-text">B) By turning off the main power</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="C" class="option-radio">
              <span class="option-text">C) By pressing the start button</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="D" class="option-radio">
              <span class="option-text">D) By adjusting the setpoint</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(4, event)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) By pressing the Emergency Stop (E-Stop) to put the system into a safety error mode.
          </div>
        </div>
        
        <div class="question-item" data-question="5">
          <h4>Question 5: Why is it important to monitor the Status LED regularly?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-5" value="A" class="option-radio">
              <span class="option-text">A) Because it helps prevent downtime and ensures faults are addressed before escalating</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="B" class="option-radio">
              <span class="option-text">B) Because it saves energy</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="C" class="option-radio">
              <span class="option-text">C) Because it makes the system look better</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="D" class="option-radio">
              <span class="option-text">D) Because it is required by regulations</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(5, event)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Because it helps prevent downtime and ensures faults are addressed before escalating.
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> 3. Interactive Status LED System</h2>
      <div id="led-display-panel" class="simulation-container">
        <div class="simulation-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Loading status LED simulation...</p>
          <p>Simulation will initialize automatically</p>
        </div>
      </div>
      
      <!-- Additional simulation panels for full functionality -->
      <div id="led-control-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      <div id="fault-injection-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      <div id="shift-handover-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      <div id="diagnostic-challenges-panel" class="simulation-panel" style="margin-top: 20px;"></div>
    </div>
  </div>


    

    

    


  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="status-led-simulation.js"></script>
  
  <script>
    // Global error handler
    window.addEventListener('error', function(e) {
      console.error('JavaScript error:', e.message, 'at', e.filename, 'line', e.lineno);
    });
    
    // Function to initialize simulation with proper error handling
    function initializeSimulation() {
      console.log('Attempting to initialize Status LED simulation...');
      
      // Check if the function exists
      if (typeof window.initializeStatusLEDSimulation === 'function') {
        console.log('✅ Status LED simulation function found');
        
        try {
          window.initializeStatusLEDSimulation();
          console.log('✅ Status LED simulation initialized successfully');
          
          // Update loading message
          const loadingDiv = document.querySelector('.simulation-loading');
          if (loadingDiv) {
            loadingDiv.innerHTML = '<i class="fas fa-check-circle"></i><p>Status LED simulation loaded successfully!</p>';
            loadingDiv.style.color = '#4CAF50';
          }
          
          // Check if LED elements were created
          setTimeout(() => {
            const led = document.getElementById('status-led');
            const statusText = document.getElementById('led-status-text');
            const meaningText = document.getElementById('led-meaning-text');
            
            console.log('LED element:', led);
            console.log('Status text element:', statusText);
            console.log('Meaning text element:', meaningText);
            
            if (led && statusText && meaningText) {
              console.log('✅ All LED elements created successfully');
            } else {
              console.log('❌ Some LED elements missing');
            }
          }, 100);
          
        } catch (error) {
          console.error('❌ Error initializing Status LED simulation:', error);
          initializeSimpleLEDSimulation();
        }
      } else {
        console.error('❌ Status LED simulation function not found');
        console.log('Available functions:', Object.keys(window).filter(key => key.includes('Simulation')));
        console.log('Available variables:', Object.keys(window).filter(key => key.includes('LED') || key.includes('FAULT')));
        initializeSimpleLEDSimulation();
      }
    }
    
    // Wait for DOM and scripts to be fully loaded
    function waitForScripts() {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeSimulation);
      } else {
        // DOM is already loaded, but wait a bit for scripts
        setTimeout(initializeSimulation, 50);
      }
    }
    
    // Start the initialization process
    waitForScripts();
    
    // Also try after a longer delay as backup
    setTimeout(() => {
      if (!document.querySelector('.led-display')) {
        console.log('Backup initialization attempt...');
        initializeSimulation();
      }
    }, 1000);
    
    // Load saved answers
    document.addEventListener('DOMContentLoaded', function() {
      loadSavedAnswers();
    });
    
    function initializeSimpleLEDSimulation() {
      console.log('Initializing simple LED simulation fallback...');
      
      const ledContainer = document.getElementById('led-display-panel');
      if (!ledContainer) {
        console.error('LED display panel not found');
        return;
      }
      
      // Create a simple LED simulation
      ledContainer.innerHTML = `
        <div class="led-display" style="text-align: center; margin: 20px 0;">
          <div class="led-indicator" id="status-led" style="width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 20px; border: 4px solid #555; background: #4CAF50; box-shadow: 0 0 20px rgba(76, 175, 80, 0.5); transition: all 0.3s ease;"></div>
          <div class="led-status" id="led-status-text" style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">Normal Operation</div>
          <div class="led-meaning" id="led-meaning-text" style="font-size: 14px; color: #AAA;">All systems operating normally</div>
        </div>
        
        <div class="led-controls" style="text-align: center; margin: 20px 0;">
          <button id="test-warning-btn" style="background: #FF9800; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 4px; cursor: pointer;">Test Warning</button>
          <button id="test-alarm-btn" style="background: #F44336; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 4px; cursor: pointer;">Test Alarm</button>
          <button id="reset-system-btn" style="background: #2196F3; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 4px; cursor: pointer;">Reset System</button>
        </div>
      `;
      
      const testWarningBtn = document.getElementById('test-warning-btn');
      const testAlarmBtn = document.getElementById('test-alarm-btn');
      const resetBtn = document.getElementById('reset-system-btn');
      const statusLed = document.getElementById('status-led');
      const statusText = document.getElementById('led-status-text');
      const meaningText = document.getElementById('led-meaning-text');
      
      testWarningBtn.addEventListener('click', function() {
        statusLed.style.background = '#FF9800';
        statusLed.style.boxShadow = '0 0 20px rgba(255, 152, 0, 0.5)';
        statusText.textContent = 'Warning';
        meaningText.textContent = 'Minor fault detected, attention required';
      });
      
      testAlarmBtn.addEventListener('click', function() {
        statusLed.style.background = '#F44336';
        statusLed.style.boxShadow = '0 0 20px rgba(244, 67, 54, 0.5)';
        statusText.textContent = 'Fault';
        meaningText.textContent = 'Critical fault, immediate action required';
      });
      
      resetBtn.addEventListener('click', function() {
        statusLed.style.background = '#4CAF50';
        statusLed.style.boxShadow = '0 0 20px rgba(76, 175, 80, 0.5)';
        statusText.textContent = 'Normal Operation';
        meaningText.textContent = 'All systems operating normally';
      });
      
      console.log('Simple LED simulation initialized');
    }
    
        function submitAnswer(questionNumber) {
      const questionItem = document.querySelector(`[data-question="${questionNumber}"]`);
      const selectedOption = questionItem.querySelector('.option-radio:checked');
      const answer = selectedOption ? selectedOption.value : '';
      
      if (answer) {
        // Define correct answers for worksheet 3
        const correctAnswers = {
          1: 'A',
          2: 'A',
          3: 'A',
          4: 'A',
          5: 'A'
        };
        
        localStorage.setItem(`worksheet3_answer${questionNumber}`, answer);
        
        // Apply visual feedback
        const allOptions = questionItem.querySelectorAll('.option-label');
        const correctAnswer = correctAnswers[questionNumber];
        
        allOptions.forEach(option => {
          const radio = option.querySelector('.option-radio');
          const optionValue = radio.value;
          
          if (optionValue === correctAnswer) {
            option.classList.add('correct');
          } else if (optionValue === answer && answer !== correctAnswer) {
            option.classList.add('incorrect');
          }
        });
        
        // Mark question as submitted to disable further interaction
        questionItem.classList.add('submitted');
        
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
        button.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
        
        // Add incorrect class for enhanced styling
        if (answer !== correctAnswer) {
          button.classList.add('incorrect');
        }
        
        setTimeout(() => {
          button.textContent = originalText;
          button.style.background = '';
          button.classList.remove('incorrect');
        }, 2000);

        // Show correct answer
        const correctAnswerDiv = questionItem.querySelector('.correct-answer');
        correctAnswerDiv.style.display = 'block';

      } else {
        alert('Please select an answer before submitting.');
      }
    }
    
    function loadSavedAnswers() {
      // Define correct answers for worksheet 3
      const correctAnswers = {
        1: 'A',
        2: 'A',
        3: 'A',
        4: 'A',
        5: 'A'
      };
      
      for (let i = 1; i <= 5; i++) {
        const saved = localStorage.getItem(`worksheet3_answer${i}`);
        if (saved) {
          const questionItem = document.querySelector(`[data-question="${i}"]`);
          if (questionItem) {
            const selectedOption = questionItem.querySelector(`.option-radio[value="${saved}"]`);
            if (selectedOption) {
              selectedOption.checked = true;
              
              // Apply visual feedback for saved answers
              const allOptions = questionItem.querySelectorAll('.option-label');
              const correctAnswer = correctAnswers[i];
              
              allOptions.forEach(option => {
                const radio = option.querySelector('.option-radio');
                const optionValue = radio.value;
                
                if (optionValue === correctAnswer) {
                  option.classList.add('correct');
                } else if (optionValue === saved && saved !== correctAnswer) {
                  option.classList.add('incorrect');
                }
              });
              
              // Mark question as submitted to disable further interaction
              questionItem.classList.add('submitted');
              
              // Show correct answer
              const correctAnswerDiv = questionItem.querySelector('.correct-answer');
              correctAnswerDiv.style.display = 'block';
            }
          }
        }
      }
    }
  </script>
</body>
</html> 