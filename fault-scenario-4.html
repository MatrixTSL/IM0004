<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Fault Scenario 4: Server Room Cooling Crisis</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">    <script src="worksheet-core.js"></script>
<script src="worksheet-tracking.js"></script>

</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link active">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li><li class="nav-item">
          <a href="#" onclick="window.location='settings.html'" class="nav-link">
            <i class="fas fa-gear"></i> SETTINGS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='fault-scenario-3.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Scenario</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Fault Scenario 4 - Server Room Cooling Crisis</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='fault-scenario-5.html'">
            <span>Next Scenario</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> Scenario Overview</h2>
      <div class="worksheet-content">
        <div class="scenario-info">
          <div class="info-grid">
            <div class="info-item">
              <strong>Company:</strong> TechCorp Marketing Agency
            </div>
            <div class="info-item">
              <strong>Process:</strong> Mission-critical server operations
            </div>
            <div class="info-item">
              <strong>Shift:</strong> Emergency response - weekend call-out
            </div>
            <div class="info-item">
              <strong>Urgency:</strong> CRITICAL - Server shutdown imminent
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong> Advanced
            </div>
            <div class="info-item">
              <strong>Time:</strong> 35-45 minutes
            </div>
          </div>
        </div>

        <div class="background-section">
          <div class="background-text">
            <div class="scenario-description">
              <h3>Background</h3>
              <p>A marketing company's server room cooling system has triggered multiple high-temperature alarms.</p>
              
              <p>The building management system shows the HVAC is running at maximum capacity but struggling to maintain temperature.</p>
              
              <p>IT staff report that several new high-performance servers were installed last week to handle increased data processing.</p>
              
              <p>The room temperature sensors show uneven readings across different areas, with some server racks showing critically high intake temperatures.</p>
            </div>
          </div>
          
          <div class="background-image">
            <img src="assets/scenarios/server-room.png" alt="Server Room Cooling System">
            <figcaption>Server Room Cooling System - Data Center</figcaption>
          </div>
        </div>

        <div class="system-overview">
          <h3>System Status</h3>
          <div class="status-grid">
            <div class="status-item">
              <span class="status-label">Max Temperature:</span>
              <span class="status-value warning">32°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Critical Threshold:</span>
              <span class="status-value">30°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Target Temperature:</span>
              <span class="status-value">22°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">HVAC Capacity:</span>
              <span class="status-value">100%</span>
            </div>
            <div class="status-item">
              <span class="status-label">Power Consumption:</span>
              <span class="status-value warning">125%</span>
            </div>
            <div class="status-item">
              <span class="status-label">Design Capacity:</span>
              <span class="status-value">100%</span>
            </div>
            <div class="status-item">
              <span class="status-label">Alarm Status:</span>
              <span class="status-value critical">CRITICAL</span>
            </div>
            <div class="status-item">
              <span class="status-label">Shutdown Risk:</span>
              <span class="status-value critical">HIGH</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Troubleshooting Tips Section -->
    <div class="worksheet-section objectives-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> Troubleshooting Tips</h2>
      <div class="worksheet-content">
        <ul class="objectives-list">
          <li>Use thermal imaging to identify hot spots and airflow patterns</li>
          <li>Check for blocked air pathways and equipment placement issues</li>
          <li>Monitor power consumption vs cooling capacity in real-time</li>
          <li>Implement emergency procedures for critical temperature situations</li>
        </ul>
      </div>
    </div>

    <!-- Investigation Tools Section -->
    <div class="worksheet-section tools-section">
      <h2 class="section-header"><i class="fas fa-tools"></i> Investigation Tools</h2>
      <div class="tools-content">
        <div class="tools-grid">
          <div class="tool-card" data-tool="thermal_imaging">
            <h4><i class="fas fa-camera"></i> Thermal Imaging Survey</h4>
            <p>Use thermal camera to identify hot spots and airflow patterns</p>
            <button class="tool-btn" onclick="useTool('thermal_imaging')">Use Tool</button>
          </div>
          <div class="tool-card" data-tool="airflow_analysis">
            <h4><i class="fas fa-wind"></i> Airflow Pattern Analysis</h4>
            <p>Check for air circulation issues and blocked pathways</p>
            <button class="tool-btn" onclick="useTool('airflow_analysis')">Use Tool</button>
          </div>
          <div class="tool-card" data-tool="power_consumption_review">
            <h4><i class="fas fa-bolt"></i> Power Consumption Review</h4>
            <p>Analyze power draw vs cooling capacity</p>
            <button class="tool-btn" onclick="useTool('power_consumption_review')">Use Tool</button>
          </div>
          <div class="tool-card" data-tool="emergency_load_balancing">
            <h4><i class="fas fa-balance-scale"></i> Emergency Load Balancing</h4>
            <p>Redistribute server loads to reduce hot spots</p>
            <button class="tool-btn" onclick="useTool('emergency_load_balancing')">Use Tool</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Investigation Results Section -->
    <div class="worksheet-section results-section" id="investigation-results" style="display: none;">
      <h2 class="section-header"><i class="fas fa-clipboard-list"></i> Investigation Results</h2>
      <div class="results-content" id="results-content">
        <!-- Results will be populated by JavaScript -->
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="worksheet-section simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> System Simulation</h2>
      <div class="worksheet-content">
        <div id="server-room-simulation" class="simulation-container">
          <div class="simulation-loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading server room cooling simulation...</p>
          </div>
        </div>
        <div id="hmi-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="plc-io-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="fault-injection-panel" class="simulation-panel" style="margin-top: 20px;"></div>
        <div id="diagnostic-challenges-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      </div>
    </div>

    <!-- Assessment Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Assessment Questions</h2>
      <div class="worksheet-content">
        <div class="question-card">
          <h3>Question 4.1</h3>
          <p>What is the most critical immediate action when server room temperatures exceed critical thresholds?</p>
          <div class="options">
            <label><input type="radio" name="q4.1" value="0"> Call the building maintenance team</label>
            <label><input type="radio" name="q4.1" value="1"> Shut down non-critical servers to reduce heat load</label>
            <label><input type="radio" name="q4.1" value="2"> Increase HVAC fan speed to maximum</label>
            <label><input type="radio" name="q4.1" value="3"> Open windows to improve ventilation</label>
          </div>
          <button onclick="submitAnswer('4.1')" class="submit-btn">Submit Answer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="hmi-simulation.js"></script>
  <script src="plc-simulation.js"></script>
  <script src="pump-simulation.js"></script>
  <script src="valve-simulation.js"></script>
  <script>
    // Tool results data
    const toolResults = {
      'thermal_imaging': {
        title: 'Thermal Imaging Survey Results',
        content: `
          <div class="result-item">
            <h4>Thermal Scan Analysis:</h4>
            <ul>
              <li>Center Section (Racks B1-B6): 31°C (Critical)</li>
              <li>North Section (Racks A1-A6): 24°C (Normal)</li>
              <li>South Section (Racks C1-C6): 26°C (Elevated)</li>
              <li>Hot Spot Location: Rack B3-B4 junction</li>
              <li>Temperature Gradient: 7°C difference across room</li>
            </ul>
            <p><strong>Analysis:</strong> Clear thermal gradient indicates airflow restriction in center section. Hot spots concentrated around new server installations.</p>
          </div>
        `
      },
      'airflow_analysis': {
        title: 'Airflow Pattern Analysis Results',
        content: `
          <div class="result-item">
            <h4>Airflow Investigation:</h4>
            <ul>
              <li>Supply Air: Normal flow to all sections</li>
              <li>Return Air: 60% blocked in center section</li>
              <li>Obstruction: Cable management blocking grilles</li>
              <li>Air Velocity: 2.5 m/s (Normal: 3.5 m/s)</li>
              <li>Static Pressure: 0.8" w.c. (Normal: 0.5" w.c.)</li>
            </ul>
            <p><strong>Analysis:</strong> Return air pathways blocked by cable management. New server installations disrupted original airflow design.</p>
          </div>
        `
      },
      'power_consumption_review': {
        title: 'Power Consumption Analysis',
        content: `
          <div class="result-item">
            <h4>Power Load Analysis:</h4>
            <ul>
              <li>Total Power Draw: 85 kW (Design: 68 kW)</li>
              <li>Overload: 125% of design capacity</li>
              <li>New Servers (Racks B1-B6): 40 kW</li>
              <li>Existing Servers: 45 kW</li>
              <li>Cooling System Capacity: 70 kW</li>
            </ul>
            <p><strong>Analysis:</strong> New high-performance servers drawing 40% more power than cooling system designed to handle.</p>
          </div>
        `
      },
      'emergency_load_balancing': {
        title: 'Emergency Load Balancing Results',
        content: `
          <div class="result-item">
            <h4>Load Redistribution Results:</h4>
            <ul>
              <li>Load Moved: 30% from hot racks</li>
              <li>Temperature Reduction: 3°C in critical areas</li>
              <li>Servers Shutdown: 8 non-critical systems</li>
              <li>Power Reduction: 12 kW immediate</li>
              <li>Emergency Status: Averted</li>
            </ul>
            <p><strong>Analysis:</strong> Successfully redistributed load to cooler areas. Immediate temperature reduction prevented emergency shutdown.</p>
          </div>
        `
      }
    };

    // Use investigation tool
    function useTool(toolId) {
      const resultsSection = document.getElementById('investigation-results');
      const resultsContent = document.getElementById('results-content');
      const toolCard = document.querySelector(`[data-tool="${toolId}"]`);
      const toolBtn = toolCard.querySelector('.tool-btn');
      
      // Disable the tool button
      toolBtn.disabled = true;
      toolBtn.textContent = 'Used';
      
      // Show results
      const result = toolResults[toolId];
      resultsContent.innerHTML = `
        <h3>${result.title}</h3>
        ${result.content}
      `;
      resultsSection.style.display = 'block';
      
      // Scroll to results
      resultsSection.scrollIntoView({ behavior: 'smooth' });
    }
    
    function submitAnswer(questionId) {
      const selectedOption = document.querySelector(`input[name="q${questionId}"]:checked`);
      if (selectedOption) {
        const answer = parseInt(selectedOption.value);
        const correctAnswer = 1; // For question 4.1
        
        if (answer === correctAnswer) {
          alert('Correct! Shutting down non-critical servers reduces heat load immediately.');
        } else {
          alert('Incorrect. The correct answer is: Shut down non-critical servers to reduce heat load.');
        }
        
        // Save answer
        localStorage.setItem(`fault-scenario-4-${questionId}`, answer);
      } else {
        alert('Please select an answer before submitting.');
      }
    }
    
    // Load saved answers on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedAnswer = localStorage.getItem('fault-scenario-4-4.1');
      if (savedAnswer !== null) {
        const radio = document.querySelector(`input[name="q4.1"][value="${savedAnswer}"]`);
        if (radio) radio.checked = true;
      }
      
      // Initialize simulations
      setTimeout(() => {
        if (typeof initializeHMISimulation === 'function') {
          initializeHMISimulation();
        }
        if (typeof initializePLCSimulation === 'function') {
          initializePLCSimulation();
        }
        if (typeof initializePumpSimulation === 'function') {
          initializePumpSimulation();
        }
        if (typeof initializeValveSimulation === 'function') {
          initializeValveSimulation();
        }
      }, 1000);
    });
  </script>
</body>
</html> 
