<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Fault Scenario 1: Tank Temperature Control System</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
        <h1>Inspiring the Next Generation of Engineers</h1>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link active">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='settings.html'" class="nav-link">
            <i class="fas fa-gear"></i> SETTINGS
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Worksheet Navigation -->
  <nav class="nav-bar">
    <div class="nav-container">
      <div class="nav-left">
        <button class="nav-btn back-btn" onclick="window.location.href='cp6773-worksheets.html'">
          <i class="fas fa-arrow-left"></i> Back to Fault Scenarios
        </button>
      </div>
      <div class="nav-center">
        <h1 class="nav-title">Fault Scenario 1 - Tank Temperature Control System</h1>
      </div>
      <div class="nav-right">
        <button class="nav-btn next-btn" onclick="window.location.href='fault-scenario-2.html'">
          Next Scenario <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> Scenario Overview</h2>
      <div class="worksheet-content">
        <div class="scenario-info">
          <div class="info-grid">
            <div class="info-item">
              <strong>Company:</strong> Industrial Chemical Processing Ltd.
            </div>
            <div class="info-item">
              <strong>Process:</strong> Chemical reaction tank temperature control
            </div>
            <div class="info-item">
              <strong>Shift:</strong> Day shift handover to night shift
            </div>
            <div class="info-item">
              <strong>Urgency:</strong> Medium - Process running hot, quality concerns
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong> Beginner
            </div>
            <div class="info-item">
              <strong>Time:</strong> 20-30 minutes
            </div>
          </div>
        </div>

        <div class="scenario-description">
          <h3>Background</h3>
          <p>You're taking over the night shift at a chemical processing plant. The day shift operator mentions they had some 'sensor issues' earlier and 'made a small adjustment' to keep production running.</p>
          
          <p>The tank temperature controller shows 75°C, which is the correct setpoint for the chemical process. However, you notice the product quality reports show signs of overheating, and the cooling system is working harder than usual.</p>
          
          <p>The day shift operator left a note: 'Added +5°C offset to compensate for slow sensor response. Should be fine now.' But they forgot to mention when this was supposed to be removed.</p>
        </div>

        <div class="system-overview">
          <h3>System Status</h3>
          <div class="status-grid">
            <div class="status-item">
              <span class="status-label">Setpoint:</span>
              <span class="status-value">75°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Displayed Temperature:</span>
              <span class="status-value">75°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Actual Temperature:</span>
              <span class="status-value">80°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Offset Applied:</span>
              <span class="status-value">+5°C</span>
            </div>
            <div class="status-item">
              <span class="status-label">Alarm Status:</span>
              <span class="status-value normal">NORMAL</span>
            </div>
            <div class="status-item">
              <span class="status-label">Quality Issues:</span>
              <span class="status-value warning">YES</span>
            </div>
            <div class="status-item">
              <span class="status-label">Cooling Load:</span>
              <span class="status-value warning">HIGH</span>
            </div>
          </div>
        </div>

        <div class="system-diagram">
          <img src="assets/scenarios/titanium-forge.png" alt="Tank Temperature Control System">
          <figcaption>Tank Temperature Control System - Industrial Chemical Processing</figcaption>
        </div>
      </div>
    </div>

    <!-- Learning Objectives Section -->
    <div class="worksheet-section objectives-section">
      <h2 class="section-header"><i class="fas fa-bullseye"></i> Learning Objectives</h2>
      <div class="objectives-content">
        <ul class="objectives-list">
          <li>Understand how operator adjustments affect temperature control</li>
          <li>Learn about temporary offsets and their dangers</li>
          <li>Recognize the symptoms of forgotten calibration adjustments</li>
          <li>Practice proper offset management procedures</li>
        </ul>
      </div>
    </div>

    <!-- Investigation Tools Section -->
    <div class="worksheet-section tools-section">
      <h2 class="section-header"><i class="fas fa-tools"></i> Investigation Tools</h2>
      <div class="tools-content">
        <div class="tools-grid">
          <div class="tool-card" data-tool="check_offset">
            <h4><i class="fas fa-search"></i> Check Controller Offset</h4>
            <p>View current offset settings in temperature controller</p>
            <button class="tool-btn" onclick="useTool('check_offset')">Use Tool</button>
          </div>
          
          <div class="tool-card" data-tool="use_thermometer">
            <h4><i class="fas fa-thermometer-half"></i> Use Portable Thermometer</h4>
            <p>Check actual tank temperature with calibrated instrument</p>
            <button class="tool-btn" onclick="useTool('use_thermometer')">Use Tool</button>
          </div>
          
          <div class="tool-card" data-tool="review_reports">
            <h4><i class="fas fa-file-alt"></i> Review Quality Reports</h4>
            <p>Check recent product quality data for temperature trends</p>
            <button class="tool-btn" onclick="useTool('review_reports')">Use Tool</button>
          </div>
          
          <div class="tool-card" data-tool="adjust_offset">
            <h4><i class="fas fa-sliders-h"></i> Adjust Temperature Offset</h4>
            <p>Remove or modify the temperature offset setting</p>
            <button class="tool-btn" onclick="useTool('adjust_offset')">Use Tool</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Investigation Results Section -->
    <div class="worksheet-section results-section" id="investigation-results" style="display: none;">
      <h2 class="section-header"><i class="fas fa-clipboard-list"></i> Investigation Results</h2>
      <div class="results-content" id="results-content">
        <!-- Results will be populated by JavaScript -->
      </div>
    </div>

    <!-- Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Analysis Questions</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What is the root cause of the temperature control problem?</h4>
          <textarea class="answer-input" data-question="1" placeholder="Describe the underlying issue..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: What are the symptoms that indicate this problem?</h4>
          <textarea class="answer-input" data-question="2" placeholder="List the observable symptoms..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: How would you safely resolve this issue?</h4>
          <textarea class="answer-input" data-question="3" placeholder="Describe your solution approach..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3)">Submit Answer</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Styles -->
  <style>
    .scenario-info {
      background: #333;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .info-item {
      color: #FFFFFF;
      padding: 10px;
      background: #444;
      border-radius: 4px;
    }
    
    .scenario-description {
      background: #333;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .scenario-description h3 {
      color: #4CAF50;
      margin-bottom: 15px;
    }
    
    .scenario-description p {
      color: #FFFFFF;
      margin-bottom: 15px;
      line-height: 1.6;
    }
    
    .system-overview {
      background: #333;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .system-overview h3 {
      color: #4CAF50;
      margin-bottom: 15px;
    }
    
    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .status-item {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: #444;
      border-radius: 4px;
    }
    
    .status-label {
      color: #AAA;
      font-weight: bold;
    }
    
    .status-value {
      color: #FFFFFF;
      font-weight: bold;
    }
    
    .status-value.normal {
      color: #4CAF50;
    }
    
    .status-value.warning {
      color: #FF9800;
    }
    
    .status-value.error {
      color: #F44336;
    }
    
    .system-diagram {
      text-align: center;
      margin: 20px 0;
    }
    
    .system-diagram img {
      max-width: 400px;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .system-diagram figcaption {
      color: #FFFFFF;
      margin-top: 10px;
      font-style: italic;
    }
    
    .objectives-list {
      list-style: none;
      padding: 0;
    }
    
    .objectives-list li {
      color: #FFFFFF;
      padding: 10px 0;
      border-bottom: 1px solid #555;
      position: relative;
      padding-left: 30px;
    }
    
    .objectives-list li:before {
      content: "✓";
      color: #4CAF50;
      font-weight: bold;
      position: absolute;
      left: 0;
    }
    
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }
    
    .tool-card {
      background: #333;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #2196F3;
    }
    
    .tool-card h4 {
      color: #2196F3;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .tool-card p {
      color: #FFFFFF;
      margin-bottom: 15px;
    }
    
    .tool-btn {
      background: #2196F3;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .tool-btn:hover {
      background: #1976D2;
    }
    
    .tool-btn:disabled {
      background: #666;
      cursor: not-allowed;
    }
    
    .question-item {
      background: #333;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
    }
    
    .question-item h4 {
      color: #FFFFFF;
      margin-bottom: 10px;
    }
    
    .answer-input {
      width: 100%;
      height: 100px;
      padding: 10px;
      border: 1px solid #555;
      border-radius: 4px;
      background: #222;
      color: #FFFFFF;
      resize: vertical;
    }
    
    .submit-question-btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    
    .submit-question-btn:hover {
      background: #45a049;
    }
  </style>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  
  <script>
    // Tool results data
    const toolResults = {
      'check_offset': {
        title: 'Controller Offset Check',
        content: `
          <div class="result-item">
            <h4>Controller Settings Found:</h4>
            <ul>
              <li>Current Offset: +5.0°C</li>
              <li>Offset Applied: 2024-01-15 14:30</li>
              <li>Applied By: Day Shift Operator</li>
              <li>Reason: "Slow sensor response compensation"</li>
              <li>Expiration: Not set</li>
            </ul>
            <p><strong>Analysis:</strong> The offset was applied as a temporary fix but never removed. This is causing the controller to display 75°C while the actual temperature is 80°C.</p>
          </div>
        `
      },
      'use_thermometer': {
        title: 'Portable Thermometer Reading',
        content: `
          <div class="result-item">
            <h4>Actual Temperature Measurement:</h4>
            <ul>
              <li>Portable Thermometer Reading: 80.2°C</li>
              <li>Controller Display: 75.0°C</li>
              <li>Difference: +5.2°C</li>
              <li>Calibration Date: 2024-01-10 (Valid)</li>
            </ul>
            <p><strong>Analysis:</strong> The actual tank temperature is 5.2°C higher than what the controller displays, confirming the offset issue.</p>
          </div>
        `
      },
      'review_reports': {
        title: 'Quality Reports Analysis',
        content: `
          <div class="result-item">
            <h4>Recent Quality Data:</h4>
            <ul>
              <li>Product Quality: Degraded (Last 3 batches)</li>
              <li>Temperature Trend: Increasing over time</li>
              <li>Cooling System Load: 85% (Normal: 40-60%)</li>
              <li>Energy Consumption: +25% above normal</li>
              <li>Operator Notes: "Product seems overcooked"</li>
            </ul>
            <p><strong>Analysis:</strong> The quality issues and increased cooling load confirm the system is running hotter than intended.</p>
          </div>
        `
      },
      'adjust_offset': {
        title: 'Offset Adjustment',
        content: `
          <div class="result-item">
            <h4>Recommended Action:</h4>
            <ol>
              <li>Gradually reduce offset from +5.0°C to 0.0°C</li>
              <li>Monitor actual temperature during adjustment</li>
              <li>Verify system stabilizes at 75°C</li>
              <li>Document the correction</li>
            </ol>
            <p><strong>Safety Note:</strong> Make changes gradually to avoid shocking the process. Monitor for 15-20 minutes after each adjustment.</p>
          </div>
        `
      }
    };

    // Use investigation tool
    function useTool(toolId) {
      const resultsSection = document.getElementById('investigation-results');
      const resultsContent = document.getElementById('results-content');
      const toolCard = document.querySelector(`[data-tool="${toolId}"]`);
      const toolBtn = toolCard.querySelector('.tool-btn');
      
      // Disable the tool button
      toolBtn.disabled = true;
      toolBtn.textContent = 'Used';
      
      // Show results
      const result = toolResults[toolId];
      resultsContent.innerHTML = `
        <h3>${result.title}</h3>
        ${result.content}
      `;
      resultsSection.style.display = 'block';
      
      // Scroll to results
      resultsSection.scrollIntoView({ behavior: 'smooth' });
    }

    // Submit answer
    function submitAnswer(questionNumber) {
      const input = document.querySelector(`[data-question="${questionNumber}"]`);
      const answer = input.value.trim();
      
      if (answer) {
        localStorage.setItem(`fault1_answer${questionNumber}`, answer);
        
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = 'Saved!';
        button.style.background = '#4CAF50';
        
        setTimeout(() => {
          button.textContent = originalText;
        }, 2000);
      } else {
        alert('Please enter an answer before submitting.');
      }
    }

    // Load saved answers
    function loadSavedAnswers() {
      for (let i = 1; i <= 3; i++) {
        const saved = localStorage.getItem(`fault1_answer${i}`);
        if (saved) {
          const input = document.querySelector(`[data-question="${i}"]`);
          if (input) {
            input.value = saved;
          }
        }
      }
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      loadSavedAnswers();
    });
  </script>
</body>
</html> 