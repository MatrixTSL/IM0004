<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Fault Scenario 3: CNC Coolant System Performance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link active">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='settings.html'" class="nav-link">
            <i class="fas fa-gear"></i> SETTINGS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='fault-scenario-2.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Scenario</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Fault Scenario 3 - CNC Coolant System Performance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='fault-scenario-4.html'">
            <span>Next Scenario</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> Scenario Overview</h2>
      <div class="worksheet-content">
        <div class="scenario-info">
          <div class="info-grid">
            <div class="info-item">
              <strong>Company:</strong> Precision Manufacturing Inc.
            </div>
            <div class="info-item">
              <strong>Process:</strong> High-precision CNC machining operations
            </div>
            <div class="info-item">
              <strong>Shift:</strong> Investigation during day shift, problem occurs nights
            </div>
            <div class="info-item">
              <strong>Urgency:</strong> Medium - Production quality declining, potential equipment damage
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong> Intermediate
            </div>
            <div class="info-item">
              <strong>Time:</strong> 30-40 minutes
            </div>
          </div>
        </div>

        <div class="background-section">
          <div class="background-text">
            <div class="scenario-description">
              <h3>Background</h3>
              <p>You're called to investigate a CNC machining facility where multiple machines are reporting spindle temperature warnings.</p>
              
              <p>The central coolant system that supplies all CNC machines shows normal pressure readings, but something isn't right.</p>
              
              <p>Operators report that the issue started gradually over the past month, coinciding with increased production demands.</p>
              
              <p>The facility recently increased production hours from 8 to 24 hours per day to meet customer demand.</p>
            </div>

            <div class="system-overview">
              <h3>System Status</h3>
              <div class="status-grid">
                <div class="status-item">
                  <span class="status-label">Coolant Temperature:</span>
                  <span class="status-value">28°C</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Target Temperature:</span>
                  <span class="status-value">22°C</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Coolant Pressure:</span>
                  <span class="status-value">4.2 bar</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Target Pressure:</span>
                  <span class="status-value">4.0 bar</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Flow Rate:</span>
                  <span class="status-value">85%</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Target Flow Rate:</span>
                  <span class="status-value">100%</span>
                </div>
                <div class="status-item">
                  <span class="status-label">System Efficiency:</span>
                  <span class="status-value warning">DECLINING</span>
                </div>
                <div class="status-item">
                  <span class="status-label">Night Shift Performance:</span>
                  <span class="status-value warning">POOR</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="background-image">
            <img src="assets/scenarios/cnc-cooling.png" alt="CNC Coolant System">
            <figcaption>CNC Coolant System - Precision Manufacturing</figcaption>
          </div>
        </div>
      </div>
    </div>

    <!-- Learning Objectives Section -->
    <div class="worksheet-section objectives-section">
      <h2 class="section-header"><i class="fas fa-bullseye"></i> Learning Objectives</h2>
      <div class="worksheet-content">
        <ul class="objectives-list">
          <li>Understand coolant system maintenance requirements</li>
          <li>Learn about thermal cycling and system degradation</li>
          <li>Recognize the impact of operational changes on system performance</li>
          <li>Practice systematic coolant system diagnostics</li>
        </ul>
      </div>
    </div>

    <!-- Interactive Tools Section -->
    <div class="worksheet-section tools-section">
      <h2 class="section-header"><i class="fas fa-tools"></i> Investigation Tools</h2>
      <div class="worksheet-content">
        <div class="tools-grid">
          <div class="tool-card" onclick="useTool('analyze_coolant_quality')">
            <i class="fas fa-flask"></i>
            <h3>Analyze Coolant Quality</h3>
            <p>Test coolant chemistry, pH, and contamination levels</p>
          </div>
          <div class="tool-card" onclick="useTool('inspect_heat_exchanger')">
            <i class="fas fa-thermometer-half"></i>
            <h3>Inspect Heat Exchanger</h3>
            <p>Check for fouling, scaling, and thermal efficiency</p>
          </div>
          <div class="tool-card" onclick="useTool('monitor_temperature_cycles')">
            <i class="fas fa-chart-line"></i>
            <h3>Monitor Temperature Cycles</h3>
            <p>Track system temperature over 24-hour periods</p>
          </div>
          <div class="tool-card" onclick="useTool('verify_flow_distribution')">
            <i class="fas fa-water"></i>
            <h3>Verify Flow Distribution</h3>
            <p>Check flow rates to individual CNC machines</p>
          </div>
        </div>
        <div id="tool-results" class="tool-results"></div>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="worksheet-section simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> System Simulation</h2>
      <div class="worksheet-content">
        <div id="coolant-system-simulation" class="simulation-container">
          <div class="simulation-loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading coolant system simulation...</p>
          </div>
        </div>
        <div id="hmi-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="plc-io-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="fault-injection-panel" class="simulation-panel" style="margin-top: 20px;"></div>
        <div id="diagnostic-challenges-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      </div>
    </div>

    <!-- Assessment Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Assessment Questions</h2>
      <div class="worksheet-content">
        <div class="question-card">
          <h3>Question 3.1</h3>
          <p>Why might the temperature issues be more prominent during night shift?</p>
          <div class="options">
            <label><input type="radio" name="q3.1" value="0"> Night shift operators are less experienced</label>
            <label><input type="radio" name="q3.1" value="1"> Ambient temperature is lower, affecting the cooling system</label>
            <label><input type="radio" name="q3.1" value="2"> Heat buildup accumulates throughout the day with no cooling recovery time</label>
            <label><input type="radio" name="q3.1" value="3"> Different CNC programs run at night</label>
          </div>
          <button onclick="submitAnswer('3.1')" class="submit-btn">Submit Answer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="hmi-simulation.js"></script>
  <script src="plc-simulation.js"></script>
  <script src="pump-simulation.js"></script>
  <script src="valve-simulation.js"></script>
  <script>
    // Tool usage tracking
    let toolResults = {};
    
    function useTool(toolId) {
      const toolData = {
        'analyze_coolant_quality': {
          title: 'Coolant Quality Analysis Results',
          content: 'Analysis reveals coolant degradation with increased pH levels and contamination. The coolant has exceeded its recommended service life due to 24-hour operation without proper maintenance cycles.',
          icon: 'fas fa-flask'
        },
        'inspect_heat_exchanger': {
          title: 'Heat Exchanger Inspection Results',
          content: 'Significant fouling detected in heat exchanger tubes. Thermal efficiency reduced by 35%. Scaling buildup from continuous operation without maintenance intervals.',
          icon: 'fas fa-thermometer-half'
        },
        'monitor_temperature_cycles': {
          title: 'Temperature Cycle Analysis',
          content: '24-hour temperature monitoring shows continuous heat buildup with no recovery periods. Temperature increases by 2-3°C per 8-hour shift, reaching critical levels by night shift.',
          icon: 'fas fa-chart-line'
        },
        'verify_flow_distribution': {
          title: 'Flow Distribution Results',
          content: 'Flow rates to individual CNC machines are inconsistent. Some machines receiving 60% of required flow due to system pressure drops and fouling in distribution lines.',
          icon: 'fas fa-water'
        }
      };
      
      const result = toolData[toolId];
      if (result) {
        toolResults[toolId] = result;
        displayToolResult(toolId, result);
      }
    }
    
    function displayToolResult(toolId, result) {
      const resultsDiv = document.getElementById('tool-results');
      const resultHtml = `
        <div class="tool-result" id="result-${toolId}">
          <div class="result-header">
            <i class="${result.icon}"></i>
            <h3>${result.title}</h3>
          </div>
          <div class="result-content">
            <p>${result.content}</p>
          </div>
        </div>
      `;
      resultsDiv.innerHTML += resultHtml;
    }
    
    function submitAnswer(questionId) {
      const selectedOption = document.querySelector(`input[name="q${questionId}"]:checked`);
      if (selectedOption) {
        const answer = parseInt(selectedOption.value);
        const correctAnswer = 2; // For question 3.1
        
        if (answer === correctAnswer) {
          alert('Correct! Heat buildup accumulates throughout the day with no cooling recovery time.');
        } else {
          alert('Incorrect. The correct answer is: Heat buildup accumulates throughout the day with no cooling recovery time.');
        }
        
        // Save answer
        localStorage.setItem(`fault-scenario-3-${questionId}`, answer);
      } else {
        alert('Please select an answer before submitting.');
      }
    }
    
    // Load saved answers on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedAnswer = localStorage.getItem('fault-scenario-3-3.1');
      if (savedAnswer !== null) {
        const radio = document.querySelector(`input[name="q3.1"][value="${savedAnswer}"]`);
        if (radio) radio.checked = true;
      }
    });
  </script>
</body>
</html> 
