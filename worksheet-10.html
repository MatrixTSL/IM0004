<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BMDTX8B88C"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-BMDTX8B88C');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Flow Sensor System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="worksheet-core.js"></script>
  <script src="worksheet-tracking.js"></script>

  <style>
    /* Simple mobile layout for the simulation section */
    @media (max-width: 768px) {
      /* Hard clamp the flow simulation container so children cannot overflow */
      #flow-sensor-panel.simulation-container {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        position: relative;
      }

      /* Any element inside the flow-sensor-panel must respect the container width */
      #flow-sensor-panel * {
        max-width: 100% !important;
        box-sizing: border-box;
      }

      /* Collapse fixed two-column layouts inside the panel to a single column */
      #flow-sensor-panel [style*="grid-template-columns: 300px 1fr"],
      #flow-sensor-panel [style*="grid-template-columns: 1fr 1fr"],
      #flow-sensor-panel [style*="grid-template-columns: 2fr 1fr"] {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Neutralize fixed widths that push past the container */
      #flow-sensor-panel [style*="min-width"],
      #flow-sensor-panel [style*="width: 400px"],
      #flow-sensor-panel [style*="min-width: 400px"] {
        min-width: 0 !important;
        width: 100% !important;
      }

      /* Make simulation container responsive */
      .simulation-section .simulation-container {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
        overflow: visible;
      }

      /* Make any control panels full width */
      .simulation-section .control-panel,
      .simulation-section .flow-control-panel {
        width: 100% !important;
        padding: 16px !important;
      }

      /* Make charts and visualizations responsive */
      .simulation-section canvas {
        width: 100% !important;
        height: 200px !important;
      }

      /* Make any flow visualizations responsive */
      .simulation-section .flow-visualization,
      .simulation-section .sensor-visualization {
        width: 100% !important;
        min-width: 0 !important; /* override inline min-width:400px */
        height: min(240px, 56vw) !important; /* responsive height that scales with screen */
        overflow: hidden !important; /* contain animation within block */
        position: relative;
      }

      /* Adjust sliders for mobile */
      .simulation-section input[type="range"] {
        height: 12px !important;
      }

      /* Make buttons easier to tap */
      .simulation-section button,
      .simulation-section .control-btn {
        padding: 12px 20px !important;
        font-size: 14px !important;
        margin-bottom: 8px !important;
      }

      /* Make option labels full width for easy tapping */
      .simulation-section .multiple-choice-options .option-label {
        display: block;
      }

      /* Make loading panel responsive */
      .simulation-section .simulation-loading {
        padding: 20px !important;
        text-align: center;
      }

      /* Stack any grid layouts on mobile */
      .simulation-section .explanation-card .card-content > div[style*="grid-template-columns"] {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Prevent text cards from overflowing on mobile */
      .simulation-section .explanation-card,
      .simulation-section .key-points-card {
        overflow: hidden;
      }
      .simulation-section .explanation-card .card-content p,
      .simulation-section .explanation-card .card-content ul,
      .simulation-section .explanation-card .card-content li {
        overflow-wrap: anywhere;
        word-break: break-word;
      }
      .simulation-section .key-points-grid {
        display: grid;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Improve mobile typography and spacing for text cards */
      .simulation-section .explanation-card,
      .simulation-section .key-points-card {
        padding: 16px !important;
      }
      .simulation-section .explanation-card .card-header h3,
      .simulation-section .key-points-card .card-header h3 {
        font-size: 16px !important;
        line-height: 1.3 !important;
      }
      .simulation-section .explanation-card .card-content,
      .simulation-section .key-points-card .key-points-grid {
        font-size: 14px !important;
        line-height: 1.6 !important;
      }
      .simulation-section .explanation-card ul,
      .simulation-section .key-points-card ul {
        padding-left: 18px !important;
        margin: 8px 0 !important;
      }
      .simulation-section .explanation-card li,
      .simulation-section .key-points-card li {
        margin: 6px 0 !important;
      }

      /* Ensure big visual blocks leave enough space below */
      .simulation-section .simulation-container > div {
        box-sizing: border-box;
        width: 100%;
        margin-bottom: 12px;
      }
    }
  </style>

</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-9.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Worksheet</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Worksheet 10 - Flow Sensor System Maintenance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-11.html'">
            <span>Next Worksheet</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <div class="introduction-content-wrapper">
          <div class="introduction-text">
            <p>This worksheet covers maintenance procedures for flow sensor systems. Flow sensors are critical components that measure the rate of fluid movement through pipes and are essential for process control, safety monitoring, and efficiency optimization in industrial systems.</p>
          </div>
          <div class="introduction-image">
            <div class="system-diagram">
              <img src="assets/maintenance/flow-sensor.png" alt="Flow Sensor System Maintenance">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Over To You Section -->
    <div class="worksheet-section over-to-you-section">
      <h2 class="section-header"><i class="fas fa-hands-helping"></i> 2. Over To You</h2>
      <div class="worksheet-content">
        <p><strong>Examine the flow sensor system and understand flow measurement principles:</strong></p>
        
        <div class="steps-container">
          <div class="step-card" data-step="1">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Locate and Observe Flow Sensor</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Run the system and locate the flow sensor both on the HMI screen and physically on the system. Note that while there's no external movement, an internal turbine is spinning and being counted by the PLC.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="2">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Test Flow Rate Response</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Increase the flow rate to 300 litres per hour and observe the reading change. Then constrict the flow by closing the hand valve clockwise and watch the flow rate drop until the system faults.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="3">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Observe Flow Settling</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Open the valve fully and restart the system. When running normally, hit the E-Stop and observe how the flow sensor takes time to settle, detecting residual forward or backward flow even after the pump stops.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- So What Section -->
    <div class="worksheet-section so-what-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> 3. So What?</h2>
      <div class="so-what-content">
        <!-- Flow Sensor Types Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-tachometer-alt"></i>
            <h3>Types of Flow Sensors</h3>
          </div>
          <div class="card-content">
            <ul>
              <li><strong>Turbine</strong> – Measures flow using a spinning rotor and counts pulses as it turns.</li>
              <li><strong>Electromagnetic</strong> – Detects flow by measuring voltage from moving fluid.</li>
              <li><strong>Ultrasonic</strong> – Uses sound waves to measure flow rate without moving parts.</li>
            </ul>
          </div>
        </div>

        <!-- Flow Control and Monitoring Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-desktop"></i>
            <h3>Flow Control and Monitoring</h3>
          </div>
          <div class="card-content">
            <p>Flow sensors help maintain accurate fluid control. Turbine sensors often output pulses that are counted by the PLC to calculate flow. These readings are usually displayed on the HMI, which may also include setup options like scaling, calibration offsets, or flow alarms. Often many flow meters will be sent off for calibration regularly to ensure they remain accurate.</p>
          </div>
        </div>

        <!-- Fault Detection Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Fault Detection and Troubleshooting</h3>
          </div>
          <div class="card-content">
            <p>Unstable or incorrect readings could indicate blockages, or sensor faults. No signal may point to wiring or power issues. Dirt, scale, or misalignment can reduce accuracy. In many systems, a lack of proper flow will trigger alarms or stop the process to prevent damage, making flow sensors key to reliable operation.</p>
          </div>
        </div>

        <!-- Key Learning Points Card -->
        <div class="key-points-card">
          <div class="card-header">
            <i class="fas fa-lightbulb"></i>
            <h3>Key Learning Points</h3>
          </div>
          <div class="key-points-grid">
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-tachometer-alt"></i>
              </div>
              <div class="key-point-content">
                <strong>Flow sensors measure fluid movement and help regulate flow in automated systems.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-microchip"></i>
              </div>
              <div class="key-point-content">
                <strong>Turbine sensors work by counting pulses as a rotor spins, which the PLC uses to calculate flow rate.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-desktop"></i>
              </div>
              <div class="key-point-content">
                <strong>Flow data is often shown on the HMI, which may also allow adjustments like scaling, offsets, or alarm thresholds.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="key-point-content">
                <strong>Low or unstable readings can point to air pockets, valve restrictions, blockages, or sensor faults.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="key-point-content">
                <strong>Flow sensors are critical for detecting system problems early and protecting equipment from damage.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-tools"></i>
              </div>
              <div class="key-point-content">
                <strong>Regular cleaning and calibration help maintain sensor accuracy and reliability.</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What does a flow sensor measure and why is it important in automated systems?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-1" value="A" class="option-radio">
              <span class="option-text">A) It measures pressure and controls valves</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="B" class="option-radio">
              <span class="option-text">B) It measures temperature and controls heating</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="C" class="option-radio">
              <span class="option-text">C) Measures fluid flow</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="D" class="option-radio">
              <span class="option-text">D) It measures level and controls pumps</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Measures fluid flow.
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: How does a turbine flow sensor work?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-2" value="A" class="option-radio">
              <span class="option-text">A) It uses ultrasonic waves to measure flow</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="B" class="option-radio">
              <span class="option-text">B) It uses a magnetic field to measure flow</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="C" class="option-radio">
              <span class="option-text">C) Spinning rotor counts pulses</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="D" class="option-radio">
              <span class="option-text">D) It uses pressure difference to measure flow</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> B) Spinning rotor counts pulses.
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: What role does the PLC play in reading the flow sensor data?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-3" value="A" class="option-radio">
              <span class="option-text">A) The PLC calibrates the flow sensor</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="B" class="option-radio">
              <span class="option-text">B) The PLC controls the flow sensor directly</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="C" class="option-radio">
              <span class="option-text">C) The PLC provides power to the flow sensor</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="D" class="option-radio">
              <span class="option-text">D) PLC counts and calculates flow</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> C) PLC counts and calculates flow.
          </div>
        </div>
        
        <div class="question-item" data-question="4">
          <h4>Question 4: What might unstable or incorrect flow readings indicate?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-4" value="A" class="option-radio">
              <span class="option-text">A) They indicate the system is working perfectly</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="B" class="option-radio">
              <span class="option-text">B) Blockages or sensor faults</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="C" class="option-radio">
              <span class="option-text">C) They indicate the flow rate is too high</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="D" class="option-radio">
              <span class="option-text">D) They indicate the temperature is too high</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(4)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> D) Blockages or sensor faults.
          </div>
        </div>
        
        <div class="question-item" data-question="5">
          <h4>Question 5: Why is regular calibration of flow sensors important?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-5" value="A" class="option-radio">
              <span class="option-text">A) Maintains accuracy</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="B" class="option-radio">
              <span class="option-text">B) Calibration makes the sensor work faster</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="C" class="option-radio">
              <span class="option-text">C) Calibration reduces energy consumption</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="D" class="option-radio">
              <span class="option-text">D) Calibration makes the sensor quieter</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(5)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Maintains accuracy.
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> 3. Interactive Flow Sensor System Maintenance</h2>
      <div id="flow-sensor-panel" class="simulation-container">
        <div class="simulation-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Loading flow sensor simulation...</p>
          <p>Simulation will initialize automatically</p>
        </div>
      </div>
    </div>
  </div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="flow-sensor-simulation.js"></script>
  
  <script>
    // Define correct answers for worksheet 10 (reshuffled to CCDBA)
    const correctAnswers = {
      "1": "C",
      "2": "C",
      "3": "D",
      "4": "B",
      "5": "A"
    };

    function submitAnswer(questionNumber) {
      const questionItem = document.querySelector(`[data-question="${questionNumber}"]`);
      if (!questionItem) return;
      
      const selectedOption = questionItem.querySelector('.option-radio:checked');
      if (!selectedOption) {
        alert('Please select an answer before submitting.');
        return;
      }
      
      const answer = selectedOption.value;
      
      // Save with enhanced tracking
      worksheetTracker.saveAnswer(10, questionNumber, answer, 'maintenance');
      
      // Apply visual feedback
      const allOptions = questionItem.querySelectorAll('.option-label');
      const correctAnswer = correctAnswers[questionNumber];
      
      allOptions.forEach(option => {
        const radio = option.querySelector('.option-radio');
        const optionValue = radio.value;
        
        if (optionValue === correctAnswer) {
          option.classList.add('correct');
        } else if (optionValue === answer && answer !== correctAnswer) {
          option.classList.add('incorrect');
        }
      });
      
      // Mark question as submitted to disable further interaction
      questionItem.classList.add('submitted');
      
      // Update submit button
      const button = questionItem.querySelector('.submit-question-btn');
      const originalText = button.textContent;
      button.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
      button.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
      
      // Add incorrect class for enhanced styling
      if (answer !== correctAnswer) {
        button.classList.add('incorrect');
      }
      
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#4CAF50';
        button.classList.remove('incorrect');
      }, 2000);

      // Show correct answer (dynamically from option text)
      const correctAnswerDiv = questionItem.querySelector('.correct-answer');
      if (correctAnswerDiv) {
        const correctOptionRadio = questionItem.querySelector(`.option-radio[value="${correctAnswer}"]`);
        if (correctOptionRadio) {
          const correctLabel = correctOptionRadio.closest('.option-label');
          if (correctLabel) {
            const correctTextSpan = correctLabel.querySelector('.option-text');
            const correctText = correctTextSpan ? correctTextSpan.textContent : `${correctAnswer}`;
            correctAnswerDiv.innerHTML = `<strong style="color: #4CAF50;">Correct Answer:</strong> ${correctText}.`;
          }
        }
        correctAnswerDiv.style.display = 'block';
      }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize tracking system
      if (typeof worksheetTracker === 'undefined') {
        console.error('Worksheet tracking system not loaded');
        return;
      }

      // Load any saved answers
      const progress = worksheetTracker.getWorksheetProgress(10, 'maintenance');
      if (progress && progress.answers) {
        Object.entries(progress.answers).forEach(([questionNumber, answerData]) => {
          const questionItem = document.querySelector(`[data-question="${questionNumber}"]`);
          if (questionItem) {
            const radio = questionItem.querySelector(`.option-radio[value="${answerData.value}"]`);
            if (radio) {
              radio.checked = true;
              // Show the correct answer for previously answered questions
              const correctAnswerDiv = questionItem.querySelector('.correct-answer');
              if (correctAnswerDiv) {
                correctAnswerDiv.style.display = 'block';
              }
            }
          }
        });
      }
    });
    
    // Step card click functionality
    function initializeStepCardClicks() {
      const stepCards = document.querySelectorAll('.step-card');
      
      stepCards.forEach(card => {
        card.addEventListener('click', function(e) {
          // Don't trigger if clicking on the checkbox itself
          if (e.target.closest('.step-checkbox')) {
            return;
          }
          
          const checkbox = this.querySelector('.step-complete-checkbox');
          if (checkbox) {
            // Toggle the checkbox
            checkbox.checked = !checkbox.checked;
            
            // Update the card's completed state using the existing class name
            if (checkbox.checked) {
              this.classList.add('step-completed');
            } else {
              this.classList.remove('step-completed');
            }
            
            // Trigger change event on checkbox for any existing listeners
            const event = new Event('change', { bubbles: true });
            checkbox.dispatchEvent(event);
          }
        });
      });
    }
    
    // Initialize step card functionality when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeStepCardClicks();
      
      // Use the existing step tracking system
      if (typeof initializeStepTracking === 'function') {
        initializeStepTracking();
      }
    });
  </script>
  
  <!-- Bottom Navigation -->
  <div class="worksheet-bottom-nav">
    <div class="worksheet-header-content">
      <div class="worksheet-header-left">
        <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-9.html'">
          <i class="fas fa-arrow-left"></i>
          <span>Previous Worksheet</span>
        </button>
      </div>
      <div class="worksheet-header-center">
        <h1 class="worksheet-title">Worksheet 10 - Flow Sensor System Maintenance</h1>
      </div>
      <div class="worksheet-header-right">
        <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-11.html'">
          <span>Next Worksheet</span>
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
  
</body>
</html> 