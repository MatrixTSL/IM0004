<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Debug - Matrix TSL - Status LED System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav-bar">
    <div class="nav-container">
      <div class="nav-left">
        <button class="nav-btn back-btn" onclick="window.location.href='worksheets.html'">
          <i class="fas fa-arrow-left"></i> Back to Worksheets
        </button>
      </div>
      <div class="nav-center">
        <h1 class="nav-title">Debug - Worksheet 3 - Status LED System Maintenance</h1>
      </div>
      <div class="nav-right">
        <button class="nav-btn next-btn" onclick="window.location.href='worksheet-4.html'">
          Next Worksheet <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <p>Status LEDs provide instant visual feedback about system conditions and are essential for quick diagnosis. These simple but critical indicators help operators understand system status at a glance.</p>
        
        <div class="system-diagram">
          <img src="assets/maintenance/status-led.png" alt="Status LED System">
          <figcaption>Status LED System Components</figcaption>
        </div>
      </div>
    </div>

    <!-- Debug Section -->
    <div class="debug-section" style="background: #333; padding: 20px; margin: 20px 0; border-radius: 8px;">
      <h3 style="color: #FF9800;">Debug Information</h3>
      <div id="debug-info" style="color: #fff; font-family: monospace; font-size: 12px;">
        <p>Loading debug information...</p>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> Interactive Status LED System</h2>
      <div id="led-display-panel" class="simulation-container">
        <div class="simulation-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Loading status LED simulation...</p>
          <p>Simulation will initialize automatically</p>
        </div>
      </div>
    </div>

    <!-- Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What do the different LED colors typically indicate in industrial systems?</h4>
          <textarea class="answer-input" data-question="1" placeholder="Describe the standard color meanings..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: Why are status LEDs important for troubleshooting?</h4>
          <textarea class="answer-input" data-question="2" placeholder="Explain their diagnostic value..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    .system-diagram { text-align: center; margin: 20px 0; }
    .system-diagram img { max-width: 400px; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
    .system-diagram figcaption { color: #FFFFFF; margin-top: 10px; font-style: italic; }
    .simulation-section { background: linear-gradient(135deg, #1a1a1a, #2d2d2d); border-radius: 12px; padding: 30px; margin: 40px 0; border: 2px solid #FF5722; box-shadow: 0 8px 20px rgba(255, 87, 34, 0.3); }
    .simulation-container { background: #333; padding: 20px; border-radius: 8px; min-height: 400px; }
    .simulation-loading { text-align: center; color: #FFFFFF; padding: 50px; }
    .simulation-loading i { font-size: 24px; margin-bottom: 15px; }
    .question-item { background: #333; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
    .question-item h4 { color: #FFFFFF; margin-bottom: 10px; }
    .answer-input { width: 100%; height: 100px; padding: 10px; border: 1px solid #555; border-radius: 4px; background: #222; color: #FFFFFF; resize: vertical; }
    .submit-question-btn { background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
  </style>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="status-led-simulation.js"></script>
  
  <script>
    const debugInfo = document.getElementById('debug-info');
    
    function addDebugInfo(message) {
      const p = document.createElement('p');
      p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      debugInfo.appendChild(p);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      addDebugInfo('DOM Content Loaded');
      
      // Check if script is loaded
      const scriptElement = document.querySelector('script[src="status-led-simulation.js"]');
      if (scriptElement) {
        addDebugInfo('✅ Status LED simulation script found in DOM');
      } else {
        addDebugInfo('❌ Status LED simulation script NOT found in DOM');
      }
      
      // Check if function exists
      setTimeout(() => {
        if (typeof window.initializeStatusLEDSimulation === 'function') {
          addDebugInfo('✅ initializeStatusLEDSimulation function found');
          
          // Check if panel exists
          const panel = document.getElementById('led-display-panel');
          if (panel) {
            addDebugInfo('✅ led-display-panel found');
            
            // Try to initialize
            try {
              window.initializeStatusLEDSimulation();
              addDebugInfo('✅ Simulation initialization called successfully');
            } catch (error) {
              addDebugInfo(`❌ Error initializing simulation: ${error.message}`);
            }
          } else {
            addDebugInfo('❌ led-display-panel NOT found');
          }
        } else {
          addDebugInfo('❌ initializeStatusLEDSimulation function NOT found');
          addDebugInfo(`Available window functions: ${Object.keys(window).filter(key => key.includes('initialize')).join(', ')}`);
        }
      }, 500);
      
      loadSavedAnswers();
    });
    
    function submitAnswer(questionNumber) {
      const input = document.querySelector('[data-question="' + questionNumber + '"]');
      const answer = input.value.trim();
      
      if (answer) {
        localStorage.setItem('worksheet3_answer' + questionNumber, answer);
        
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = 'Saved!';
        button.style.background = '#4CAF50';
        
        setTimeout(() => {
          button.textContent = originalText;
        }, 2000);
      } else {
        alert('Please enter an answer before submitting.');
      }
    }
    
    function loadSavedAnswers() {
      for (let i = 1; i <= 2; i++) {
        const saved = localStorage.getItem('worksheet3_answer' + i);
        if (saved) {
          const input = document.querySelector('[data-question="' + i + '"]');
          if (input) {
            input.value = saved;
          }
        }
      }
    }
  </script>
</body>
</html> 