<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Fault Scenario 8: Aerospace Manufacturing Flow System</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">    <script src="worksheet-core.js"></script>
<script src="worksheet-tracking.js"></script>

</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link active">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='fault-scenario-7.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Scenario</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Fault Scenario 8 - Aerospace Manufacturing Flow System</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='cp6773-worksheets.html'">
            <span>Back to Fault Scenarios</span>
            <i class="fas fa-list"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> Fault Scenario 8: Aerospace Manufacturing Flow System</h2>
      <div class="worksheet-content">
        <div class="scenario-info">
          <div class="info-grid">
            <div class="info-item">
              <strong>Company:</strong> Aerospace Manufacturer
            </div>
            <div class="info-item">
              <strong>Process:</strong> Flow control system
            </div>
            <div class="info-item">
              <strong>Shift:</strong> Maintenance team investigation
            </div>
            <div class="info-item">
              <strong>Urgency:</strong> High - System behaving violently, can't maintain flow
            </div>
            <div class="info-item">
              <strong>Difficulty:</strong> Advanced
            </div>
            <div class="info-item">
              <strong>Time:</strong> 30-40 minutes
            </div>
          </div>
        </div>

        <div class="background-section">
          <div class="background-text">
            <div class="scenario-description">
              <h3>Background</h3>
              <p>You're part of the maintenance team at an Aerospace manufacturer. You're aware that a new colleague has joined the team full of experience and has been tinkering in order to get the system up to full speed quicker.</p>
              
              <p>The managers were happy with your colleague's progress until this morning, when things started behaving more violently. The system can't maintain the correct flow.</p>
              
              <p>Your new colleague suspects it's the hand valve you replaced a while ago. Management would like to roll the system back but want to also know what the issue is. Go through the HMI and figure out what's happened.</p>
            </div>
          </div>
          
          <div class="background-image">
            <img src="assets/scenarios/ph-control.png" alt="Aerospace Flow Control System">
            <figcaption>Aerospace Flow Control System - Manufacturing</figcaption>
          </div>
        </div>

        <div class="system-overview">
          <h3>System Status</h3>
          <div class="status-grid">
            <div class="status-item">
              <span class="status-label">System Behavior:</span>
              <span class="status-value error">VIOLENT</span>
            </div>
            <div class="status-item">
              <span class="status-label">Flow Control:</span>
              <span class="status-value error">CAN'T MAINTAIN</span>
            </div>
            <div class="status-item">
              <span class="status-label">Hand Valve:</span>
              <span class="status-value warning">SUSPECT</span>
            </div>
            <div class="status-item">
              <span class="status-label">New Colleague:</span>
              <span class="status-value">EXPERIENCED</span>
            </div>
            <div class="status-item">
              <span class="status-label">Management Status:</span>
              <span class="status-value">WANTS ROLLBACK</span>
            </div>
            <div class="status-item">
              <span class="status-label">HMI Access:</span>
              <span class="status-value">AVAILABLE</span>
            </div>
            <div class="status-item">
              <span class="status-label">System Speed:</span>
              <span class="status-value warning">FULL SPEED ATTEMPTED</span>
            </div>
            <div class="status-item">
              <span class="status-label">Safety Status:</span>
              <span class="status-value error">CONCERNING</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Troubleshooting Tips Section -->
    <div class="worksheet-section objectives-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> Troubleshooting Tips</h2>
      <div class="worksheet-content">
        <ul class="objectives-list">
          <li>Review HMI system logs and recent parameter changes</li>
          <li>Check hand valve installation and flow control settings</li>
          <li>Inspect system modifications made by the new colleague</li>
          <li>Analyze flow control parameters and system behavior patterns</li>
        </ul>
      </div>
    </div>

    <!-- Interactive Tools Section -->
    <div class="worksheet-section tools-section">
      <h2 class="section-header"><i class="fas fa-tools"></i> Investigation Tools</h2>
      <div class="worksheet-content">
        <div class="tools-grid">
          <div class="tool-card" onclick="useTool('review_hmi_logs')">
            <i class="fas fa-desktop"></i>
            <h3>Review HMI Logs</h3>
            <p>Check HMI system logs and recent parameter changes</p>
          </div>
          <div class="tool-card" onclick="useTool('check_hand_valve')">
            <i class="fas fa-valve"></i>
            <h3>Check Hand Valve</h3>
            <p>Inspect hand valve installation and flow control settings</p>
          </div>
          <div class="tool-card" onclick="useTool('inspect_system_modifications')">
            <i class="fas fa-cog"></i>
            <h3>Inspect System Modifications</h3>
            <p>Check modifications made by the new colleague</p>
          </div>
          <div class="tool-card" onclick="useTool('analyze_flow_parameters')">
            <i class="fas fa-chart-line"></i>
            <h3>Analyze Flow Parameters</h3>
            <p>Review flow control parameters and system behavior</p>
          </div>
        </div>
        <div id="tool-results" class="tool-results"></div>
      </div>
    </div>

    <!-- Simulation Section - Commented out for consistency with other scenarios -->
    <!-- <div class="worksheet-section simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> System Simulation</h2>
      <div class="worksheet-content">
        <div id="ph-control-simulation" class="simulation-container">
          <div class="simulation-loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading pH control simulation...</p>
          </div>
        </div>
        <div id="hmi-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="plc-io-panel" class="simulation-container" style="margin-top: 20px;"></div>
        <div id="fault-injection-panel" class="simulation-panel" style="margin-top: 20px;"></div>
        <div id="diagnostic-challenges-panel" class="simulation-panel" style="margin-top: 20px;"></div>
      </div>
    </div> -->

    <!-- Assessment Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-clipboard-list"></i> Fault Analysis Worksheet</h2>
      <div class="questions-content">
        <div class="analysis-section">
          <h4>Observations:</h4>
          <textarea class="answer-input" data-question="observations" placeholder="Record your observations of the system behavior, readings, and any unusual indicators..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer('observations')">Save Observations</button>
          </div>
        </div>
        
        <div class="analysis-section">
          <h4>Problem:</h4>
          <textarea class="answer-input" data-question="problem" placeholder="Identify the root cause and describe the specific problem affecting the system..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer('problem')">Save Problem Analysis</button>
          </div>
        </div>
        
        <div class="analysis-section">
          <h4>Solution:</h4>
          <textarea class="answer-input" data-question="solution" placeholder="Describe the steps you would take to resolve the issue safely and effectively..."></textarea>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer('solution')">Save Solution</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Simulation scripts commented out to prevent JavaScript conflicts -->
  <!-- <script src="hmi-simulation.js"></script> -->
  <!-- <script src="plc-simulation.js"></script> -->
  <!-- <script src="valve-simulation.js"></script> -->
  <!-- <script src="pump-simulation.js"></script> -->
  <script>
    // Tool usage tracking
    let toolResults = {};
    
    function useTool(toolId) {
      const toolData = {
        'review_hmi_logs': {
          title: 'HMI Logs Analysis',
          content: 'HMI system logs reveal multiple parameter changes made by the new colleague over the past week. Flow control parameters were modified to increase system speed, but the changes are causing violent system behavior. Recent modifications include flow rate increases and control loop adjustments.',
          icon: 'fas fa-desktop'
        },
        'check_hand_valve': {
          title: 'Hand Valve Inspection',
          content: 'Hand valve inspection shows the valve was replaced but not properly calibrated. The valve is operating at 85% capacity instead of the recommended 60-70% range. This is causing flow control instability and violent system behavior.',
          icon: 'fas fa-valve'
        },
        'inspect_system_modifications': {
          title: 'System Modifications Review',
          content: 'Review of system modifications shows the new colleague bypassed several safety interlocks and increased flow control parameters beyond recommended limits. Multiple control loops were modified to achieve full speed operation, causing system instability.',
          icon: 'fas fa-cog'
        },
        'analyze_flow_parameters': {
          title: 'Flow Parameters Analysis',
          content: 'Flow parameter analysis reveals control loop settings were changed from conservative to aggressive values. Flow rate increased by 40%, control response time reduced by 60%, and safety margins eliminated. These changes are causing the violent system behavior.',
          icon: 'fas fa-chart-line'
        }
      };
      
      const result = toolData[toolId];
      if (result) {
        toolResults[toolId] = result;
        displayToolResult(toolId, result);
      }
    }
    
    function displayToolResult(toolId, result) {
      const resultsDiv = document.getElementById('tool-results');
      const resultHtml = `
        <div class="tool-result" id="result-${toolId}">
          <div class="result-header">
            <i class="${result.icon}"></i>
            <h3>${result.title}</h3>
          </div>
          <div class="result-content">
            <p>${result.content}</p>
          </div>
        </div>
      `;
      resultsDiv.innerHTML += resultHtml;
    }
    
    // Submit answer
    function submitAnswer(questionId) {
      const input = document.querySelector(`[data-question="${questionId}"]`);
      const answer = input.value.trim();
      
      if (answer) {
        // Save to local storage for backward compatibility
        localStorage.setItem(`fault8_${questionId}`, answer);
        
        // Track with the tracking system if available
        if (typeof trackFaultScenarioAnswer === 'function') {
          trackFaultScenarioAnswer(questionId, answer);
        }
        
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = 'Saved!';
        button.style.background = '#4CAF50';
        
        setTimeout(() => {
          button.textContent = originalText;
        }, 2000);
      } else {
        alert('Please enter content before saving.');
      }
    }
    
    // Load saved answers on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Load observations
      const savedObservations = localStorage.getItem('fault8_observations');
      if (savedObservations !== null) {
        const textarea = document.querySelector('[data-question="observations"]');
        if (textarea) textarea.value = savedObservations;
      }
      
      // Load problem
      const savedProblem = localStorage.getItem('fault8_problem');
      if (savedProblem !== null) {
        const textarea = document.querySelector('[data-question="problem"]');
        if (textarea) textarea.value = savedProblem;
      }
      
      // Load solution
      const savedSolution = localStorage.getItem('fault8_solution');
      if (savedSolution !== null) {
        const textarea = document.querySelector('[data-question="solution"]');
        if (textarea) textarea.value = savedSolution;
      }
    });
  </script>
</body>
</html> 
