<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BMDTX8B88C"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-BMDTX8B88C');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - Temperature Sensor System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.min.js"></script>
  <script src="worksheet-core.js"></script>
  <script src="worksheet-tracking.js"></script>

  <style>
    /* Custom noUiSlider Styles */
    .noUi-target {
      background: #23272b;
      border: none;
      box-shadow: none;
      height: 8px;
    }
    .noUi-connects {
      border-radius: 4px;
      overflow: hidden;
    }
    .noUi-connect {
      border-radius: 4px;
    }
    .noUi-handle {
      width: 24px !important;
      height: 24px !important;
      border-radius: 50% !important;
      background: #fff !important;
      box-shadow: 0 0 10px rgba(0,0,0,0.2) !important;
      border: 2px solid #2196F3 !important;
      cursor: pointer;
    }
    .noUi-handle:before, .noUi-handle:after {
      display: none;
    }
    .noUi-handle:hover {
      box-shadow: 0 0 15px rgba(33,150,243,0.4) !important;
    }
    .noUi-handle:active {
      box-shadow: 0 0 20px rgba(33,150,243,0.6) !important;
    }
    .noUi-tooltip {
      background: #1a1a1a;
      border: 1px solid #333;
      color: #fff;
      font-size: 12px;
      padding: 4px 8px;
    }
    
    /* Temperature Slider */
    #temperature-slider .noUi-connect {
      background: linear-gradient(to right, #1B5E20, #4CAF50, #FFC107, #FF5722);
    }
    #temperature-slider .noUi-handle {
      border-color: #FF5722 !important;
    }
    
    /* Offset Slider */
    #offset-slider .noUi-connect {
      background: linear-gradient(to right, #1565C0, #2196F3);
    }
    
    /* Drift Slider */
    #drift-slider .noUi-connect {
      background: linear-gradient(to right, #FFA000, #FFC107);
    }
    #drift-slider .noUi-handle {
      border-color: #FFC107 !important;
    }
    /* Prevent status text/badges from causing layout shift */
    #temperature-sensor-panel .status-line,
    #temperature-sensor-panel .status-row,
    #temperature-sensor-panel .status-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }
    #temperature-sensor-panel .status-text,
    #temperature-sensor-panel .status-message,
    #temperature-sensor-panel .status-value,
    #temperature-sensor-panel [data-role="status"] {
      /* Lock width so label changes don't shift layout */
      flex: 0 0 10rem;
      width: 10rem;
      min-width: 10rem;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.4;
    }

    /* Fallback for unknown status element names */
    #temperature-sensor-panel .status,
    #temperature-sensor-panel .badge,
    #temperature-sensor-panel .status-badge {
      flex: 0 0 10rem;
      width: 10rem;
      min-width: 10rem;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* On small screens, use a tighter width and smaller font to reduce movement */
    @media (max-width: 480px) {
      #temperature-sensor-panel .status-text,
      #temperature-sensor-panel .status-message,
      #temperature-sensor-panel .status-value,
      #temperature-sensor-panel [data-role="status"],
      #temperature-sensor-panel .status,
      #temperature-sensor-panel .badge,
      #temperature-sensor-panel .status-badge {
        flex: 0 0 7rem;
        width: 7rem;
        min-width: 7rem;
        font-size: 12px !important;
      }
    }
  </style>
</head>
<head>
  <style>
    /* Mobile responsiveness for the simulation area */
    @media (max-width: 768px) {
      /* Clamp the panel and prevent horizontal overflow */
      #temperature-sensor-panel.simulation-container {
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important; /* fix horizontal bleed only */
        overflow-y: initial !important; /* do not introduce inner vertical scrolling */
        position: relative;
      }

      #temperature-sensor-panel * {
        max-width: 100% !important;
        box-sizing: border-box;
      }

      /* Stack any fixed grids to one column */
      #temperature-sensor-panel [style*="grid-template-columns: 300px 1fr"],
      #temperature-sensor-panel [style*="grid-template-columns: 1fr 1fr"],
      #temperature-sensor-panel [style*="grid-template-columns: 2fr 1fr"] {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }

      /* Neutralize inline min-widths that cause overflow */
      #temperature-sensor-panel [style*="min-width"],
      #temperature-sensor-panel [style*="width: 400px"],
      #temperature-sensor-panel [style*="min-width: 400px"] {
        min-width: 0 !important;
        width: 100% !important;
      }

      /* Ensure sliders and charts scale */
      #temperature-sensor-panel canvas,
      #temperature-sensor-panel .noUi-target {
        width: 100% !important;
      }
      #temperature-sensor-panel img,
      #temperature-sensor-panel video {
        display: block;
        max-width: 100% !important;
        height: auto !important;
        margin: 0 auto;
      }

      /* noUiSlider internals can create horizontal bleed; clamp them */
      #temperature-sensor-panel .noUi-base,
      #temperature-sensor-panel .noUi-connects,
      #temperature-sensor-panel .noUi-pips {
        width: 100% !important;
        left: 0 !important;
        right: 0 !important;
        margin: 0 !important;
        overflow: hidden !important;
      }
      /* Some themes add negative offsets on pips; neutralize */
      #temperature-sensor-panel .noUi-pips-vertical,
      #temperature-sensor-panel .noUi-pips-horizontal {
        left: 0 !important;
        right: 0 !important;
      }
      /* Ensure any slider container does not exceed width */
      #temperature-sensor-panel [class*="slider"],
      #temperature-sensor-panel [class*="control"],
      #temperature-sensor-panel [class*="card"] {
        max-width: 100% !important;
        overflow: hidden;
      }

      /* Status section: allow cards to show full content and wrap nicely */
      #temperature-sensor-panel [class*="status"] [class*="card"],
      #temperature-sensor-panel .status-grid [class*="card"] {
        overflow: visible !important;
      }
      #temperature-sensor-panel .status-grid {
        display: grid !important;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)) !important;
        gap: 12px !important;
        width: 100% !important;
      }

      /* Make multiple-choice options full width for easy tapping */
      .simulation-section .multiple-choice-options .option-label {
        display: block;
      }

      /* Touch-friendly slider tweaks */
      #temperature-sensor-panel .noUi-target {
        height: 12px !important;
        margin: 10px 0 !important;
        border-radius: 6px !important;
      }
      #temperature-sensor-panel .noUi-handle {
        width: 28px !important;
        height: 28px !important;
        border: 3px solid #fff !important;
        box-shadow: 0 6px 16px rgba(0,0,0,0.35) !important;
      }
      #temperature-sensor-panel .noUi-tooltip {
        font-size: 11px !important;
        padding: 3px 6px !important;
      }
      /* Reduce tick label size if pips are enabled */
      #temperature-sensor-panel .noUi-pips,
      #temperature-sensor-panel .noUi-value {
        font-size: 10px !important;
        color: #cccccc !important;
      }
      /* Prevent headings from truncating */
      #temperature-sensor-panel h3,
      #temperature-sensor-panel h4,
      #temperature-sensor-panel h5 {
        font-size: 14px !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp0539-worksheets.html'" class="nav-link">
            <i class="fas fa-cogs"></i> CP0539
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='cp6773-worksheets.html'" class="nav-link">
            <i class="fas fa-exclamation-triangle"></i> CP6773
          </a>
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-10.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Worksheet</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Worksheet 11 - Temperature Sensor System Maintenance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-12.html'">
            <span>Next Worksheet</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <div class="introduction-content-wrapper">
          <div class="introduction-text">
            <p>This worksheet covers maintenance procedures for temperature sensor systems. Temperature sensors are critical components that measure thermal conditions and are essential for process control, safety monitoring, and quality assurance in industrial systems.</p>
          </div>
          <div class="introduction-image">
            <div class="system-diagram">
              <img src="assets/maintenance/temperature-sensor.png" alt="Temperature Sensor System Maintenance">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Over To You Section -->
    <div class="worksheet-section over-to-you-section">
      <h2 class="section-header"><i class="fas fa-hands-helping"></i> 2. Over To You</h2>
      <div class="worksheet-content">
        <p><strong>Examine the temperature sensor system and understand analogue measurement principles:</strong></p>
        
        <div class="steps-container">
          <div class="step-card" data-step="1">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Identify Temperature Sensor Components</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Locate the temperature sensor comprising an RTD probe and electronic transmitter module. Understand that the RTD changes resistance with temperature, which the transmitter converts to a voltage signal for the PLC.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="2">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Observe Temperature Monitoring</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Run the system on full flow and observe the temperature on the HMI. Note the current temperature as running for 10 minutes would cause it to rise due to pump heat generation.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="3">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Test Temperature Cutout System</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Navigate to Main Menu → Setup screen. Set the high temperature cutout below the current temperature to trigger a safety shutdown. Reset to 40°C and low cutout to 5°C afterward, then clear all faults.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- So What Section -->
    <div class="worksheet-section so-what-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> 3. So What?</h2>
      <div class="so-what-content">
        <!-- Temperature Sensor Types Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-thermometer-half"></i>
            <h3>Types of Temperature Sensors</h3>
          </div>
          <div class="card-content">
            <ul>
              <li><strong>Thermocouple</strong> – Measures temperature by detecting voltage changes.</li>
              <li><strong>RTD</strong> – Measures temperature through changes in resistance.</li>
              <li><strong>Thermistor</strong> – A resistor that changes with temperature and responds quickly.</li>
            </ul>
          </div>
        </div>

        <!-- Safety and Fault Detection Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-shield-alt"></i>
            <h3>Safety and Fault Detection</h3>
          </div>
          <div class="card-content">
            <p>Temperature sensors keep equipment safe by preventing overheating and detecting faults. They provide live readings, but strange or missing values may point to damage, wiring issues, or interference. Dirt or vibration can also affect accuracy, and incorrect readings may require recalibration or replacement.</p>
          </div>
        </div>

        <!-- Control and Monitoring Card -->
        <div class="explanation-card">
          <div class="card-header">
            <i class="fas fa-cogs"></i>
            <h3>Control and Monitoring</h3>
          </div>
          <div class="card-content">
            <p>Sensors often control heaters, fans, or coolers. If the temperature doesn't change, check airflow, controls, or sensor placement. Many systems rely on these sensors to trigger alarms or shutdowns when temperatures get too high.</p>
          </div>
        </div>

        <!-- Key Learning Points Card -->
        <div class="key-points-card">
          <div class="card-header">
            <i class="fas fa-lightbulb"></i>
            <h3>Key Learning Points</h3>
          </div>
          <div class="key-points-grid">
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-thermometer-half"></i>
              </div>
              <div class="key-point-content">
                <strong>Temperature sensors monitor heat levels to keep systems running safely and efficiently.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-microchip"></i>
              </div>
              <div class="key-point-content">
                <strong>RTDs change resistance with temperature, and the transmitter converts this to a signal the PLC can read.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-desktop"></i>
              </div>
              <div class="key-point-content">
                <strong>The HMI displays live temperature and allows you to set cutout limits for high and low temperatures.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-shield-alt"></i>
              </div>
              <div class="key-point-content">
                <strong>Setting a cutout beyond the current temperature will shut down the system to prevent damage.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="key-point-content">
                <strong>Strange or missing readings may indicate sensor faults, wiring issues, or environmental interference.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-cogs"></i>
              </div>
              <div class="key-point-content">
                <strong>Sensors often control heaters or coolers and trigger alarms or shutdowns if temperatures go out of range.</strong>
              </div>
            </div>
            
            <div class="key-point-item">
              <div class="key-point-icon">
                <i class="fas fa-tools"></i>
              </div>
              <div class="key-point-content">
                <strong>Regular checks and calibration help ensure accurate and reliable operation.</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What is the main purpose of a temperature sensor in an automated system?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-1" value="A" class="option-radio">
              <span class="option-text">A) To measure pressure levels</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="B" class="option-radio">
              <span class="option-text">B) To control the flow rate of fluids</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="C" class="option-radio">
              <span class="option-text">C) Monitors heat; prevents over/under temp</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="D" class="option-radio">
              <span class="option-text">D) To control valve positions</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) To monitor heat levels and prevent overheating or freezing, ensuring safe and efficient operation.
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: How does an RTD temperature sensor work?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-2" value="A" class="option-radio">
              <span class="option-text">A) It uses a magnetic field to measure temperature</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="B" class="option-radio">
              <span class="option-text">B) Resistance changes with temperature</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="C" class="option-radio">
              <span class="option-text">C) It uses ultrasonic waves to measure temperature</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="D" class="option-radio">
              <span class="option-text">D) It uses pressure to measure temperature</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> D) It uses pressure to measure temperature.
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: What happens if the temperature exceeds the high cutout limit set on the HMI?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-3" value="A" class="option-radio">
              <span class="option-text">A) System shuts down</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="B" class="option-radio">
              <span class="option-text">B) The system will continue running normally</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="C" class="option-radio">
              <span class="option-text">C) The system will speed up</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="D" class="option-radio">
              <span class="option-text">D) The system will slow down</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) The system will shut down to protect against overheating or unsafe conditions.
          </div>
        </div>
        
        <div class="question-item" data-question="4">
          <h4>Question 4: What could cause a temperature sensor to give incorrect or no readings?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-4" value="A" class="option-radio">
              <span class="option-text">A) High voltage, low voltage, or no voltage</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="B" class="option-radio">
              <span class="option-text">B) High flow rate, low pressure, or electrical noise</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="C" class="option-radio">
              <span class="option-text">C) Fast movement, slow movement, or no movement</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="D" class="option-radio">
              <span class="option-text">D) Wiring/sensor damage, dirt, vibration, interference</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(4)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> C) Fast movement, slow movement, or no movement.
          </div>
        </div>
        
        <div class="question-item" data-question="5">
          <h4>Question 5: Why is calibration important for temperature sensors?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-5" value="A" class="option-radio">
              <span class="option-text">A) Calibration makes the sensor quieter</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="B" class="option-radio">
              <span class="option-text">B) Calibration makes the sensor work faster</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="C" class="option-radio">
              <span class="option-text">C) Calibration reduces energy consumption</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="D" class="option-radio">
              <span class="option-text">D) Keeps readings accurate</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(5)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) Calibration keeps the readings accurate and ensures the sensor responds correctly to real conditions.
          </div>
        </div>
      </div>
    </div>

    <!-- Simulation Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-cogs"></i> 3. Interactive Temperature Sensor System Maintenance</h2>
      <div id="temperature-sensor-panel" class="simulation-container">
        <div class="simulation-loading">
          <i class="fas fa-spinner fa-spin"></i>
          <p>Loading temperature sensor simulation...</p>
          <p>Simulation will initialize automatically</p>
        </div>
      </div>
    </div>
  </div>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="temperature-sensor-simulation.js"></script>
  
  <script>
    // Define correct answers for worksheet 11 (reshuffled to CBADD)
    const correctAnswers = {
      "1": "C",
      "2": "B",
      "3": "A",
      "4": "D",
      "5": "D"
    };

    function submitAnswer(questionNumber) {
      const questionItem = document.querySelector(`[data-question="${questionNumber}"]`);
      if (!questionItem) return;
      
      const selectedOption = questionItem.querySelector('.option-radio:checked');
      if (!selectedOption) {
        alert('Please select an answer before submitting.');
        return;
      }
      
      const answer = selectedOption.value;
      
      // Save with enhanced tracking
      worksheetTracker.saveAnswer(11, questionNumber, answer, 'maintenance');
      
      // Apply visual feedback
      const allOptions = questionItem.querySelectorAll('.option-label');
      const correctAnswer = correctAnswers[questionNumber];
      
      allOptions.forEach(option => {
        const radio = option.querySelector('.option-radio');
        const optionValue = radio.value;
        
        if (optionValue === correctAnswer) {
          option.classList.add('correct');
        } else if (optionValue === answer && answer !== correctAnswer) {
          option.classList.add('incorrect');
        }
      });
      
      // Mark question as submitted to disable further interaction
      questionItem.classList.add('submitted');
      
      // Update submit button
      const button = questionItem.querySelector('.submit-question-btn');
      const originalText = button.textContent;
      button.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
      button.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
      
      // Add incorrect class for enhanced styling
      if (answer !== correctAnswer) {
        button.classList.add('incorrect');
      }
      
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#4CAF50';
        button.classList.remove('incorrect');
      }, 2000);

      // Show correct answer (dynamically from option text)
      const correctAnswerDiv = questionItem.querySelector('.correct-answer');
      if (correctAnswerDiv) {
        const correctOptionRadio = questionItem.querySelector(`.option-radio[value="${correctAnswer}"]`);
        if (correctOptionRadio) {
          const correctLabel = correctOptionRadio.closest('.option-label');
          if (correctLabel) {
            const correctTextSpan = correctLabel.querySelector('.option-text');
            const correctText = correctTextSpan ? correctTextSpan.textContent : `${correctAnswer}`;
            correctAnswerDiv.innerHTML = `<strong style="color: #4CAF50;">Correct Answer:</strong> ${correctText}.`;
          }
        }
        correctAnswerDiv.style.display = 'block';
      }
    }

    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize tracking system
      if (typeof worksheetTracker === 'undefined') {
        console.error('Worksheet tracking system not loaded');
        return;
      }

      // Load any saved answers
      const progress = worksheetTracker.getWorksheetProgress(11, 'maintenance');
      if (progress && progress.answers) {
        Object.entries(progress.answers).forEach(([questionNumber, answerData]) => {
          const questionItem = document.querySelector(`[data-question="${questionNumber}"]`);
          if (questionItem) {
            const radio = questionItem.querySelector(`.option-radio[value="${answerData.value}"]`);
            if (radio) {
              radio.checked = true;
              // Show the correct answer for previously answered questions
              const correctAnswerDiv = questionItem.querySelector('.correct-answer');
              if (correctAnswerDiv) {
                correctAnswerDiv.style.display = 'block';
              }
            }
          }
        });
      }
    });
    
    // Step card click functionality
    function initializeStepCardClicks() {
      const stepCards = document.querySelectorAll('.step-card');
      
      stepCards.forEach(card => {
        card.addEventListener('click', function(e) {
          // Don't trigger if clicking on the checkbox itself
          if (e.target.closest('.step-checkbox')) {
            return;
          }
          
          const checkbox = this.querySelector('.step-complete-checkbox');
          if (checkbox) {
            // Toggle the checkbox
            checkbox.checked = !checkbox.checked;
            
            // Update the card's completed state using the existing class name
            if (checkbox.checked) {
              this.classList.add('step-completed');
            } else {
              this.classList.remove('step-completed');
            }
            
            // Trigger change event on checkbox for any existing listeners
            const event = new Event('change', { bubbles: true });
            checkbox.dispatchEvent(event);
          }
        });
      });
    }
    
    // Initialize step card functionality when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeStepCardClicks();
      
      // Use the existing step tracking system
      if (typeof initializeStepTracking === 'function') {
        initializeStepTracking();
      }
    });
  </script>
  
  <!-- Bottom Navigation -->
  <div class="worksheet-bottom-nav">
    <div class="worksheet-header-content">
      <div class="worksheet-header-left">
        <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-10.html'">
          <i class="fas fa-arrow-left"></i>
          <span>Previous Worksheet</span>
        </button>
      </div>
      <div class="worksheet-header-center">
        <h1 class="worksheet-title">Worksheet 11 - Temperature Sensor System Maintenance</h1>
      </div>
      <div class="worksheet-header-right">
        <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-12.html'">
          <span>Next Worksheet</span>
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
  
</body>
</html> 